Inspecting 458 files
CWCCC.CCCCWCCCCCCCCCC...CCWCC.CCW.CCCW.CCCW.CCC.CCCC.C.CCCC.C...CW....WC.CCWW.CCWCWCC.WCCCC..W.CCC...CCWCCC.CC..CCCCCC...C...CC.C.CC.CW...C...C.WC..WCWCCCCCCCWCCCCWCCWCCCCCCWC..WC..CC.CC.CC.CCCCWWWCCC..WCWCCCCCCC.C....C..C..CCCWC..C..C...W.....C...CWW.CC....C....WCCCCCCCWWW........CC....C.C..WCC..CCCCC.CCCCCCCCCC...C..WC.C..WCWCWCC....CCW.........C.CC.W..CCCCC.C.CC.C.......C...CCCC....CC....W.CC........CC....C.CCW...C..W..W...............CCC..CC..W...C.W

Offenses:

commands/city/update_event_attendee_profile.rb:7:5: C: Metrics/AbcSize: Assignment Branch Condition size for execute is too high. [22.36/20] (http://c2.com/cgi/wiki?AbcMetric)
    def execute
    ^^^
commands/city/update_event_attendee_profile.rb:7:5: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def execute ...
    ^^^^^^^^^^^
commands/city/update_event_attendee_profile.rb:8:39: C: Style/EmptyLiteral: Use array literal [] instead of Array.new. (https://github.com/bbatsov/ruby-style-guide#literal-array-hash)
      applied_counts                = Array.new { 0.0 }
                                      ^^^^^^^^^
commands/city/update_event_attendee_profile.rb:9:39: C: Style/EmptyLiteral: Use array literal [] instead of Array.new. (https://github.com/bbatsov/ruby-style-guide#literal-array-hash)
      guestlisted_to_applied_ratios = Array.new { 0.0 }
                                      ^^^^^^^^^
commands/city/update_event_attendee_profile.rb:10:39: C: Style/EmptyLiteral: Use array literal [] instead of Array.new. (https://github.com/bbatsov/ruby-style-guide#literal-array-hash)
      confirmed_to_applied_ratios   = Array.new { 0.0 }
                                      ^^^^^^^^^
commands/city/update_event_attendee_profile.rb:11:39: C: Style/EmptyLiteral: Use array literal [] instead of Array.new. (https://github.com/bbatsov/ruby-style-guide#literal-array-hash)
      average_donation_amounts      = Array.new { 0.0 }
                                      ^^^^^^^^^
commands/city_team/notification.rb:27:7: W: Lint/UselessAssignment: Useless assignment to variable - city_email. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      city_email = 'dan@sofarsounds.com'
      ^^^^^^^^^^
commands/city_team/send_city_team_event_address_emails_low.rb:14:121: C: Metrics/LineLength: Line is too long. [218/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "This is an automated message. We have identified that there may be an issue sending emails for <a href='#{edit_event_url(event)}'>#{event.display_name}</a>. The total number of address emails sent is below 80%."
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/city_team/send_city_team_event_address_missing.rb:14:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "This is an automated message. Please add an address to event: <a href='#{edit_event_url(event)}'>#{event.display_name}</a>"
                                                                                                                        ^^^^^^^^^^
commands/city_team/send_city_team_event_lineup_missing.rb:10:121: C: Metrics/LineLength: Line is too long. [142/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "This is an automated message. Please add a lineup to event: <a href='#{admin_event_performances_url(event)}'>#{event.display_name}</a>"
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^
commands/competition/artist_competition/entered_notification.rb:14:7: C: Metrics/AbcSize: Assignment Branch Condition size for template_vars is too high. [27/20] (http://c2.com/cgi/wiki?AbcMetric)
      def template_vars(entrant)
      ^^^
commands/competition/artist_competition/entered_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/artist_competition/entrant_notifications.rb:47:13: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
      alias :async? :async
            ^^^^^^^^^^^^^^
commands/competition/artist_competition/entrant_notifications.rb:48:13: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
      alias :force? :force
            ^^^^^^^^^^^^^^
commands/competition/artist_competition/loser_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/artist_competition/winner_notification.rb:14:7: C: Metrics/AbcSize: Assignment Branch Condition size for template_vars is too high. [22/20] (http://c2.com/cgi/wiki?AbcMetric)
      def template_vars(entrant)
      ^^^
commands/competition/artist_competition/winner_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/close.rb:7:5: C: Metrics/AbcSize: Assignment Branch Condition size for perform is too high. [40.56/20] (http://c2.com/cgi/wiki?AbcMetric)
    def perform
    ^^^
commands/competition/close.rb:7:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for perform is too high. [7/6]
    def perform
    ^^^
commands/competition/close.rb:7:5: C: Metrics/MethodLength: Method has too many lines. [26/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def perform ...
    ^^^^^^^^^^^
commands/competition/close.rb:48:121: C: Metrics/LineLength: Line is too long. [179/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @winning_entries ||= CompetitionShareLink.where(competition: @competition).order(competition_share_links_count: :desc, updated_at: :asc).limit(competition.number_of_winners)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/close.rb:61:78: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
        attendee = EventAttendee::Create.new(competition.event, winner.user, { plus_one: true }).attendee(false)
                                                                             ^^^^^^^^^^^^^^^^^^
commands/competition/close.rb:64:9: W: Lint/UselessAssignment: Useless assignment to variable - attendee. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
        attendee = EventAttendee::AutoConfirmation.new(competition.event.get_attendee(winner.user)).prepare_attendee(true)
        ^^^^^^^^
commands/competition/close.rb:64:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        attendee = EventAttendee::AutoConfirmation.new(competition.event.get_attendee(winner.user)).prepare_attendee(true)
                                                                                                                        ^^
commands/competition/close.rb:75:5: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def generate_prize(entrant) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/close.rb:78:26: C: Rails/TimeZone: Do not use Time.now.strftime without zone. Use one of Time.zone.now.strftime, Time.current, Time.now.strftime.in_time_zone, Time.now.strftime.utc, Time.now.strftime.getlocal, Time.now.strftime.iso8601, Time.now.strftime.jisx0301, Time.now.strftime.rfc3339, Time.now.strftime.to_i, Time.now.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        valid_from: Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT),
                         ^^^
commands/competition/create.rb:8:5: C: Metrics/AbcSize: Assignment Branch Condition size for build_artist_competition_for is too high. [26.08/20] (http://c2.com/cgi/wiki?AbcMetric)
    def build_artist_competition_for(performance)
    ^^^
commands/competition/create.rb:8:5: C: Metrics/MethodLength: Method has too many lines. [25/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def build_artist_competition_for(performance) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/entered_notification.rb:13:5: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def template_vars(entrant) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/entrant_notifications.rb:46:11: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :async? :async
          ^^^^^^^^^^^^^^
commands/competition/entrant_notifications.rb:47:11: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :force? :force
          ^^^^^^^^^^^^^^
commands/competition/loser_notification.rb:13:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def template_vars(entrant) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/send_admin_competition_closed.rb:38:121: C: Metrics/LineLength: Line is too long. [182/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "This is an automated message. your competition has now closed and the winners have been selected.  Visit <a href='#{admin_competition_path(@competition)} to view the winners."
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/vote_competition/entered_notification.rb:14:7: C: Metrics/AbcSize: Assignment Branch Condition size for template_vars is too high. [29/20] (http://c2.com/cgi/wiki?AbcMetric)
      def template_vars(entrant)
      ^^^
commands/competition/vote_competition/entered_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/vote_competition/entered_notification.rb:16:121: C: Metrics/LineLength: Line is too long. [124/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
          'FACEBOOK_SHARE_LINK' => "https://www.facebook.com/sharer.php?u=#{vote_competition_share_url(entrant.share_uid)}",
                                                                                                                        ^^^^
commands/competition/vote_competition/entered_notification.rb:17:170: C: Metrics/LineLength: Line is too long. [222/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
          'TWITTER_SHARE_LINK' => "https://twitter.com/share?text=Are+you+voting?+%23eureferendum+%23euvote+Share+now+to+win+tickets+to+the+%23Voting+LIVE+SESSION!&url=#{vote_competition_share_url(id: entrant.share_uid)}",
                                                                                                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/vote_competition/entrant_notifications.rb:47:13: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
      alias :async? :async
            ^^^^^^^^^^^^^^
commands/competition/vote_competition/entrant_notifications.rb:48:13: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
      alias :force? :force
            ^^^^^^^^^^^^^^
commands/competition/vote_competition/loser_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/vote_competition/winner_notification.rb:14:7: C: Metrics/AbcSize: Assignment Branch Condition size for template_vars is too high. [30/20] (http://c2.com/cgi/wiki?AbcMetric)
      def template_vars(entrant)
      ^^^
commands/competition/vote_competition/winner_notification.rb:14:7: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def template_vars(entrant) ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/competition/winner_notification.rb:13:5: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def template_vars(entrant) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/attendee_notifications.rb:60:5: C: Metrics/AbcSize: Assignment Branch Condition size for direct_email is too high. [25.16/20] (http://c2.com/cgi/wiki?AbcMetric)
    def direct_email(event_attendee)
    ^^^
commands/event/attendee_notifications.rb:63:7: C: Style/RaiseArgs: Provide an exception class and message as arguments to raise. (https://github.com/bbatsov/ruby-style-guide#exception-class-messages)
      raise AttendeeNotificationsError.new(model.errors.full_messages.to_sentence) unless model.valid?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/attendee_notifications.rb:66:28: C: Rails/Output: Do not write to stdout. Use Rails' logger if you want to log.
      Rails.logger.debug { print rendered } if Rails.env.development?
                           ^^^^^
commands/event/attendee_notifications.rb:67:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      MessageMailer.new(event_attendee.user, model.subject, rendered, event.city.from_email, event.city.from_name).deliver
                                                                                                                        ^^
commands/event/attendee_notifications.rb:118:7: C: Style/RaiseArgs: Provide an exception class and message as arguments to raise. (https://github.com/bbatsov/ruby-style-guide#exception-class-messages)
      raise AttendeeNotificationsError.new(model.errors.full_messages.to_sentence) unless model.valid?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/attendee_notifications.rb:120:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^
commands/event/attendee_notifications.rb:124:121: C: Metrics/LineLength: Line is too long. [144/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/auto_invite.rb:68:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      !event.is_published? || event.start <= 5.days.from_now || !event.is_confirmable? || !auto_invite_capacity_available?
                                                                                                                        ^^
commands/event/build.rb:10:7: W: Lint/UselessAssignment: Useless assignment to variable - event. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      event = Event.new(merged_event_params)
      ^^^^^
commands/event/build.rb:19:121: C: Metrics/LineLength: Line is too long. [186/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      temp_event_params.merge!(header_image_content_type: 'image/jpeg', header_image_filename: File.basename(@random_image), header_image_size: File.size(@random_image)) if @random_image
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/build.rb:29:5: C: Metrics/AbcSize: Assignment Branch Condition size for time_params is too high. [37.01/20] (http://c2.com/cgi/wiki?AbcMetric)
    def time_params
    ^^^
commands/event/build.rb:31:121: C: Metrics/LineLength: Line is too long. [167/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [event_params[:start].year.to_i, event_params[:start].month.to_i, event_params[:start].day.to_i, event_params[:start].hour.to_i, event_params[:start].min.to_i]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/build.rb:33:121: C: Metrics/LineLength: Line is too long. [168/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [event_params['start(1i)'].to_i, event_params['start(2i)'].to_i, event_params['start(3i)'].to_i, event_params['start(4i)'].to_i, event_params['start(5i)'].to_i]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/build.rb:42:121: C: Metrics/LineLength: Line is too long. [153/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      return unless (event_params[:header_image].to_s == '{}' || event_params[:header_image].to_s == '') && event_params[:remote_header_image_url].blank?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/build.rb:62:121: C: Metrics/LineLength: Line is too long. [124/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        image_pool_path = File.join(Rails.root, 'app', 'assets', 'images', 'event-image-pool', venue_type.downcase, '*.jpg')
                                                                                                                        ^^^^
commands/event/confirm_attendance.rb:33:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "We've confirmed your place for the show. Your name will be on the door and you'll receive the address by email the day before the event.\n
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/confirm_reserved_attendance.rb:11:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "We've confirmed your place for the show. Your name will be on the door and you'll receive the address by email the day before the event.\n
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/post_event_artists.rb:45:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.artist.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^^^
commands/event/post_event_artists.rb:49:121: C: Metrics/LineLength: Line is too long. [146/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, event_attendee.artist.email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/post_event_guests.rb:45:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^
commands/event/post_event_guests.rb:49:121: C: Metrics/LineLength: Line is too long. [144/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/post_event_host.rb:26:5: C: Metrics/AbcSize: Assignment Branch Condition size for template_vars is too high. [28.46/20] (http://c2.com/cgi/wiki?AbcMetric)
    def template_vars(event_attendee)
    ^^^
commands/event/post_event_host.rb:26:5: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def template_vars(event_attendee) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/post_event_host.rb:26:23: W: Lint/UnusedMethodArgument: Unused method argument - event_attendee. If it's necessary, use _ or _event_attendee as an argument name to indicate that it won't be used. You can also write as template_vars(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def template_vars(event_attendee)
                      ^^^^^^^^^^^^^^
commands/event/post_event_host.rb:39:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        vars["ARTIST_IMAGE_#{index}"] = "https:#{Refile.attachment_url(performance.artist, :main_image, :fill, 554, 369)}"
                                                                                                                        ^^
commands/event/post_event_host.rb:69:121: C: Metrics/LineLength: Line is too long. [124/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^
commands/event/post_event_plus_ones.rb:45:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^
commands/event/post_event_vips.rb:47:121: C: Metrics/LineLength: Line is too long. [131/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^
commands/event/post_event_vips.rb:55:121: C: Metrics/LineLength: Line is too long. [139/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, event_attendee.email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^
commands/event/remind_attendees.rb:37:121: C: Metrics/LineLength: Line is too long. [257/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "We've got you listed as unconfirmed for #{event.day_of_week}'s show, are you able to make it? Yes - #{confirm_yes_url} No - #{confirm_no_url} You'll need to confirm yes to receive the address. Please reply with any questions - hope to see you there!"
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/reveal_address.rb:17:5: C: Metrics/AbcSize: Assignment Branch Condition size for message_body is too high. [30.95/20] (http://c2.com/cgi/wiki?AbcMetric)
    def message_body(attendee)
    ^^^
commands/event/reveal_address.rb:17:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for message_body is too high. [7/6]
    def message_body(attendee)
    ^^^
commands/event/reveal_address.rb:17:22: W: Lint/UnusedMethodArgument: Unused method argument - attendee. If it's necessary, use _ or _attendee as an argument name to indicate that it won't be used. You can also write as message_body(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def message_body(attendee)
                     ^^^^^^^^
commands/event/reveal_address.rb:29:121: C: Metrics/LineLength: Line is too long. [218/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "#{headline_str} Please join us between #{event.arrival_time_window}. We'll kick off soon afterwards. Full address is: #{address_str}. #{map_links_str} #{directions_str} #{closest_station_str} #{message_pre_24h}"
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/reveal_address_to_vip.rb:17:5: C: Metrics/AbcSize: Assignment Branch Condition size for direct_email is too high. [24.17/20] (http://c2.com/cgi/wiki?AbcMetric)
    def direct_email(event_attendee)
    ^^^
commands/event/reveal_address_to_vip.rb:20:7: C: Style/RaiseArgs: Provide an exception class and message as arguments to raise. (https://github.com/bbatsov/ruby-style-guide#exception-class-messages)
      raise AttendeeNotificationsError.new(model.errors.full_messages.to_sentence) unless model.valid?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/reveal_address_to_vip.rb:23:28: C: Rails/Output: Do not write to stdout. Use Rails' logger if you want to log.
      Rails.logger.debug { print rendered } if Rails.env.development?
                           ^^^^^
commands/event/reveal_address_to_vip.rb:30:7: C: Style/RaiseArgs: Provide an exception class and message as arguments to raise. (https://github.com/bbatsov/ruby-style-guide#exception-class-messages)
      raise AttendeeNotificationsError.new(model.errors.full_messages.to_sentence) unless model.valid?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/reveal_address_to_vip.rb:32:121: C: Metrics/LineLength: Line is too long. [131/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^
commands/event/reveal_address_to_vip.rb:36:121: C: Metrics/LineLength: Line is too long. [139/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailerWorker.perform_async(template, event_attendee.email, template_vars(event_attendee), subject, from_email, from_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^
commands/event/unlucky_attendees.rb:37:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      MessageMailer.new(event_attendee.user, model.subject, renderer.render(model), event.city.from_email, event.city.from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^
commands/event/unlucky_attendees.rb:41:121: C: Metrics/LineLength: Line is too long. [300/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      "Thanks so much for applying to come on #{event.nice_short_date}, unfortunately you didn't get in this time. The demand in #{event.city.title} is very high; for this event only 1 in #{event.success_ratio} applicants got in. We recognise that some of you have been trying for a while to get in;"
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/update.rb:11:50: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      event_params_with_utc = event_params.merge({ start_utc: start_time_in_utc })
                                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/update.rb:25:5: C: Metrics/AbcSize: Assignment Branch Condition size for time_params is too high. [37.01/20] (http://c2.com/cgi/wiki?AbcMetric)
    def time_params
    ^^^
commands/event/update.rb:27:121: C: Metrics/LineLength: Line is too long. [167/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [event_params[:start].year.to_i, event_params[:start].month.to_i, event_params[:start].day.to_i, event_params[:start].hour.to_i, event_params[:start].min.to_i]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/update.rb:29:121: C: Metrics/LineLength: Line is too long. [168/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [event_params['start(1i)'].to_i, event_params['start(2i)'].to_i, event_params['start(3i)'].to_i, event_params['start(4i)'].to_i, event_params['start(5i)'].to_i]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event/waitlist_users.rb:29:23: W: Lint/UnusedMethodArgument: Unused method argument - attendee. If it's necessary, use _ or _attendee as an argument name to indicate that it won't be used. You can also write as template_vars(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def template_vars(attendee)
                      ^^^^^^^^
commands/event/waitlist_users.rb:39:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, event_attendee.user.email, template_vars(event_attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^^^^^^^^^^^^^
commands/event_attendee/auto_confirmation.rb:9:5: C: Metrics/AbcSize: Assignment Branch Condition size for prepare_attendee is too high. [20.2/20] (http://c2.com/cgi/wiki?AbcMetric)
    def prepare_attendee(force = false)
    ^^^
commands/event_attendee/auto_confirmation.rb:9:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def prepare_attendee(force = false) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:12:5: C: Metrics/AbcSize: Assignment Branch Condition size for reserve_tickets! is too high. [33.08/20] (http://c2.com/cgi/wiki?AbcMetric)
    def reserve_tickets!
    ^^^
commands/event_attendee/auto_reservation.rb:12:5: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def reserve_tickets! ...
    ^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:36:5: C: Rails/Delegate: Use delegate to define delegations.
    def currency
    ^^^
commands/event_attendee/auto_reservation.rb:52:5: C: Metrics/AbcSize: Assignment Branch Condition size for tracking_properties is too high. [25.2/20] (http://c2.com/cgi/wiki?AbcMetric)
    def tracking_properties
    ^^^
commands/event_attendee/auto_reservation.rb:57:7: C: Performance/RedundantMerge: Use properties[:current_utm_medium] = session[:current_utm_medium] instead of properties.merge!({ current_utm_medium: session[:current_utm_medium] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:57:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:58:7: C: Performance/RedundantMerge: Use properties[:current_utm_source] = session[:current_utm_source] instead of properties.merge!({ current_utm_source: session[:current_utm_source] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:58:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:59:7: C: Performance/RedundantMerge: Use properties[:current_utm_campaign] = session[:current_utm_campaign] instead of properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/auto_reservation.rb:59:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:12:5: C: Metrics/AbcSize: Assignment Branch Condition size for confirm! is too high. [28.09/20] (http://c2.com/cgi/wiki?AbcMetric)
    def confirm! charge
    ^^^
commands/event_attendee/confirmation.rb:12:5: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def confirm! charge ...
    ^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:12:18: C: Style/MethodDefParentheses: Use def with parentheses when there are parameters. (https://github.com/bbatsov/ruby-style-guide#method-parens)
    def confirm! charge
                 ^^^^^^
commands/event_attendee/confirmation.rb:44:5: C: Rails/Delegate: Use delegate to define delegations.
    def currency
    ^^^
commands/event_attendee/confirmation.rb:72:7: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
      if attendee.plus_one?
      ^^
commands/event_attendee/confirmation.rb:87:5: C: Metrics/AbcSize: Assignment Branch Condition size for tracking_properties is too high. [25.2/20] (http://c2.com/cgi/wiki?AbcMetric)
    def tracking_properties
    ^^^
commands/event_attendee/confirmation.rb:92:7: C: Performance/RedundantMerge: Use properties[:current_utm_medium] = session[:current_utm_medium] instead of properties.merge!({ current_utm_medium: session[:current_utm_medium] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:92:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:93:7: C: Performance/RedundantMerge: Use properties[:current_utm_source] = session[:current_utm_source] instead of properties.merge!({ current_utm_source: session[:current_utm_source] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:93:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:94:7: C: Performance/RedundantMerge: Use properties[:current_utm_campaign] = session[:current_utm_campaign] instead of properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/confirmation.rb:94:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/create.rb:37:7: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
      MixpanelTrackWorker.perform_async( ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:12:5: C: Metrics/AbcSize: Assignment Branch Condition size for reserve_tickets! is too high. [41.16/20] (http://c2.com/cgi/wiki?AbcMetric)
    def reserve_tickets! charge
    ^^^
commands/event_attendee/reservation.rb:12:5: C: Metrics/MethodLength: Method has too many lines. [22/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def reserve_tickets! charge ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:12:26: C: Style/MethodDefParentheses: Use def with parentheses when there are parameters. (https://github.com/bbatsov/ruby-style-guide#method-parens)
    def reserve_tickets! charge
                         ^^^^^^
commands/event_attendee/reservation.rb:42:5: C: Rails/Delegate: Use delegate to define delegations.
    def currency
    ^^^
commands/event_attendee/reservation.rb:67:5: C: Metrics/AbcSize: Assignment Branch Condition size for tracking_properties is too high. [25.2/20] (http://c2.com/cgi/wiki?AbcMetric)
    def tracking_properties
    ^^^
commands/event_attendee/reservation.rb:72:7: C: Performance/RedundantMerge: Use properties[:current_utm_medium] = session[:current_utm_medium] instead of properties.merge!({ current_utm_medium: session[:current_utm_medium] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:72:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:73:7: C: Performance/RedundantMerge: Use properties[:current_utm_source] = session[:current_utm_source] instead of properties.merge!({ current_utm_source: session[:current_utm_source] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:73:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:74:7: C: Performance/RedundantMerge: Use properties[:current_utm_campaign] = session[:current_utm_campaign] instead of properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/reservation.rb:74:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/save_plus_one.rb:7:5: C: Metrics/AbcSize: Assignment Branch Condition size for update! is too high. [33.24/20] (http://c2.com/cgi/wiki?AbcMetric)
    def update!
    ^^^
commands/event_attendee/save_plus_one.rb:7:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for update! is too high. [10/6]
    def update!
    ^^^
commands/event_attendee/save_plus_one.rb:7:5: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def update! ...
    ^^^^^^^^^^^
commands/event_attendee/save_plus_one.rb:7:5: C: Metrics/PerceivedComplexity: Perceived complexity for update! is too high. [12/7]
    def update!
    ^^^
commands/event_attendee/save_plus_one.rb:34:9: C: Style/PredicateName: Rename has_plus_one? to plus_one?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
    def has_plus_one?
        ^^^^^^^^^^^^^
commands/event_attendee/save_plus_one.rb:38:9: C: Style/PredicateName: Rename has_plus_two? to plus_two?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
    def has_plus_two?
        ^^^^^^^^^^^^^
commands/event_attendee/transfer.rb:12:5: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def transfer_ticket_to(new_event) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/transfer.rb:30:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      ticket_transfer = TicketTransfer.new(event_attendee: attendee, from: event, to: new_event, transferred_by: current_admin)
                                                                                                                        ^^^^^^^
commands/event_attendee/upgrade.rb:10:18: C: Style/MethodDefParentheses: Use def with parentheses when there are parameters. (https://github.com/bbatsov/ruby-style-guide#method-parens)
    def upgrade! charge
                 ^^^^^^
commands/event_attendee/upgrade.rb:44:5: C: Metrics/AbcSize: Assignment Branch Condition size for track_upgrade is too high. [25.2/20] (http://c2.com/cgi/wiki?AbcMetric)
    def track_upgrade
    ^^^
commands/event_attendee/upgrade.rb:48:7: C: Performance/RedundantMerge: Use properties[:current_utm_medium] = session[:current_utm_medium] instead of properties.merge!({ current_utm_medium: session[:current_utm_medium] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/upgrade.rb:48:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/upgrade.rb:49:7: C: Performance/RedundantMerge: Use properties[:current_utm_source] = session[:current_utm_source] instead of properties.merge!({ current_utm_source: session[:current_utm_source] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/upgrade.rb:49:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/upgrade.rb:50:7: C: Performance/RedundantMerge: Use properties[:current_utm_campaign] = session[:current_utm_campaign] instead of properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/event_attendee/upgrade.rb:50:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      properties.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/payment_process/paypal.rb:36:7: C: Performance/RedundantMerge: Use transaction_params[:options] = { submit_for_settlement: true } instead of transaction_params.merge!(options: { submit_for_settlement: true }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      transaction_params.merge!(options: { submit_for_settlement: true })
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/payment_process/paypal.rb:52:5: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def paypal_account ...
    ^^^^^^^^^^^^^^^^^^
commands/payment_process/paypal_anonymous.rb:24:33: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      transaction_params.merge!({ ...
                                ^
commands/payment_process/stripe.rb:11:5: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def process!(charge, currency) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/payment_process/stripe_anonymous.rb:8:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def process!(charge, currency) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/payment_process_factory.rb:16:3: C: Metrics/AbcSize: Assignment Branch Condition size for processor is too high. [24.7/20] (http://c2.com/cgi/wiki?AbcMetric)
  def processor
  ^^^
commands/payment_process_factory.rb:16:3: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def processor ...
  ^^^^^^^^^^^^^
commands/payment_process_factory.rb:39:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    stripe? ? params.require(:card_stripe).permit(:uid, :type) : params.require(:card_paypal_account).permit(:payment_method_nonce, :type)
                                                                                                                        ^^^^^^^^^^^^^^^^^^
commands/post_action_notification/notification.rb:52:11: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :async? :async
          ^^^^^^^^^^^^^^
commands/post_action_notification/notification.rb:53:11: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :force? :force
          ^^^^^^^^^^^^^^
commands/post_action_notification/welcome_plus_ones.rb:28:7: W: Lint/UselessAssignment: Useless assignment to variable - template_vars. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      template_vars = {
      ^^^^^^^^^^^^^
commands/post_action_notification/welcome_plus_ones.rb:42:121: C: Metrics/LineLength: Line is too long. [124/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      NotificationMailer.new(template, attendee.user.email, template_vars(attendee), subject, from_email, from_name).deliver
                                                                                                                        ^^^^
commands/referral/email_referral.rb:26:7: W: Lint/UselessAssignment: Useless assignment to variable - template_vars. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      template_vars = {
      ^^^^^^^^^^^^^
commands/referral/notification.rb:46:11: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :async? :async
          ^^^^^^^^^^^^^^
commands/referral/promo_code_for_referring_user.rb:28:121: C: Metrics/LineLength: Line is too long. [135/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      signup.incentive_referrer = PromoCode::TwoFreeTicketSingleUse.new(prefix: "#{user.first_name.upcase}#{user.last_name[0].upcase}",
                                                                                                                        ^^^^^^^^^^^^^^^
commands/referral/promo_code_for_referring_user.rb:29:90: C: Rails/TimeZone: Do not use Time.now.strftime without zone. Use one of Time.zone.now.strftime, Time.current, Time.now.strftime.in_time_zone, Time.now.strftime.utc, Time.now.strftime.getlocal, Time.now.strftime.iso8601, Time.now.strftime.jisx0301, Time.now.strftime.rfc3339, Time.now.strftime.to_i, Time.now.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
                                                                        valid_from: Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT),
                                                                                         ^^^
commands/referral/promo_code_for_referring_user.rb:29:121: C: Metrics/LineLength: Line is too long. [137/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                                                                        valid_from: Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT),
                                                                                                                        ^^^^^^^^^^^^^^^^^
commands/referral/promo_code_for_referring_user.rb:30:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                                                                        expires_at: 60.days.from_now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT))
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
commands/referral/promo_code_for_signed_up_user.rb:28:121: C: Metrics/LineLength: Line is too long. [135/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      signup.incentive_referral = PromoCode::TwoFreeTicketSingleUse.new(prefix: "#{user.first_name.upcase}#{user.last_name[0].upcase}",
                                                                                                                        ^^^^^^^^^^^^^^^
commands/referral/promo_code_for_signed_up_user.rb:29:90: C: Rails/TimeZone: Do not use Time.now.strftime without zone. Use one of Time.zone.now.strftime, Time.current, Time.now.strftime.in_time_zone, Time.now.strftime.utc, Time.now.strftime.getlocal, Time.now.strftime.iso8601, Time.now.strftime.jisx0301, Time.now.strftime.rfc3339, Time.now.strftime.to_i, Time.now.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
                                                                        valid_from: Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT),
                                                                                         ^^^
commands/referral/promo_code_for_signed_up_user.rb:29:121: C: Metrics/LineLength: Line is too long. [137/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                                                                        valid_from: Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT),
                                                                                                                        ^^^^^^^^^^^^^^^^^
commands/referral/promo_code_for_signed_up_user.rb:30:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                                                                        expires_at: 60.days.from_now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT))
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
commands/send_payment_notification_to_finance_team.rb:36:5: W: Lint/UselessAssignment: Useless assignment to variable - message. Use just operator +. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    message += "Stripe ID: #{charge.id}<br>"
    ^^^^^^^
commands/send_reveal_address_notification_to_admin.rb:31:121: C: Metrics/LineLength: Line is too long. [128/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    message = "This is an automated message. We have started to reveal the address for <strong>#{event.display_name}</strong>. "
                                                                                                                        ^^^^^^^^
commands/send_reveal_address_notification_to_admin.rb:32:5: W: Lint/UselessAssignment: Useless assignment to variable - message. Use just operator +. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    message += "The address we are revealling is:<br> <em>#{event.address}</em>"
    ^^^^^^^
commands/update_video_from_youtube.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for update_videos is too high. [23.87/20] (http://c2.com/cgi/wiki?AbcMetric)
  def self.update_videos(just_view_count = false)
  ^^^
commands/update_video_from_youtube.rb:4:3: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def self.update_videos(just_view_count = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/update_video_from_youtube.rb:14:14: C: Style/ParenthesesAroundCondition: Don't use parentheses around the condition of an if. (https://github.com/bbatsov/ruby-style-guide#no-parens-if)
          if ((row_counter % 100) == 0) # print every N
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/update_video_from_youtube.rb:15:13: C: Rails/Output: Do not write to stdout. Use Rails' logger if you want to log.
            print '.'
            ^^^^^
commands/update_video_from_youtube.rb:16:13: C: Rails/Output: Do not write to stdout. Use Rails' logger if you want to log.
            print "\n" if ((row_counter % 1000) == 0)
            ^^^^^
commands/update_video_from_youtube.rb:16:27: C: Style/ParenthesesAroundCondition: Don't use parentheses around the condition of an if. (https://github.com/bbatsov/ruby-style-guide#no-parens-if)
            print "\n" if ((row_counter % 1000) == 0)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/update_video_from_youtube.rb:39:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def video_attributes(just_view_count = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/come_back_with_incentive.rb:41:12: C: Rails/TimeZone: Do not use Time.now.strftime without zone. Use one of Time.zone.now.strftime, Time.current, Time.now.strftime.in_time_zone, Time.now.strftime.utc, Time.now.strftime.getlocal, Time.now.strftime.iso8601, Time.now.strftime.jisx0301, Time.now.strftime.rfc3339, Time.now.strftime.to_i, Time.now.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      Time.now.strftime(PromoCode::EXPIRES_AT_DATE_FORMAT)
           ^^^
commands/user/come_back_with_no_incentive.rb:13:23: W: Lint/UnusedMethodArgument: Unused method argument - user. If it's necessary, use _ or _user as an argument name to indicate that it won't be used. You can also write as template_vars(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def template_vars(user)
                      ^^^^
commands/user/post_signup.rb:12:5: C: Metrics/AbcSize: Assignment Branch Condition size for execute is too high. [32.57/20] (http://c2.com/cgi/wiki?AbcMetric)
    def execute(session)
    ^^^
commands/user/post_signup.rb:12:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for execute is too high. [7/6]
    def execute(session)
    ^^^
commands/user/post_signup.rb:12:5: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def execute(session) ...
    ^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:17:7: C: Performance/RedundantMerge: Use event_vars[:current_utm_medium] = session[:current_utm_medium] instead of event_vars.merge!({ current_utm_medium: session[:current_utm_medium] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      event_vars.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:17:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      event_vars.merge!({ current_utm_medium: session[:current_utm_medium] }) if session[:current_utm_medium]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:18:7: C: Performance/RedundantMerge: Use event_vars[:current_utm_source] = session[:current_utm_source] instead of event_vars.merge!({ current_utm_source: session[:current_utm_source] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      event_vars.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:18:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      event_vars.merge!({ current_utm_source: session[:current_utm_source] }) if session[:current_utm_source]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:19:7: C: Performance/RedundantMerge: Use event_vars[:current_utm_campaign] = session[:current_utm_campaign] instead of event_vars.merge!({ current_utm_campaign: session[:current_utm_campaign] }). (https://github.com/JuanitoFatas/fast-ruby#hashmerge-vs-hash-code)
      event_vars.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:19:25: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      event_vars.merge!({ current_utm_campaign: session[:current_utm_campaign] }) if session[:current_utm_campaign]
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/user/post_signup.rb:65:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        self.user_vars = { aquisition_source: 'competition', aquisition_campaign: referring_share_link.competition.title }
                                                                                                                        ^^
commands/user/setup_mailchimp.rb:20:5: C: Metrics/AbcSize: Assignment Branch Condition size for update_user_from_mailchimp_subscriber_info is too high. [36.37/20] (http://c2.com/cgi/wiki?AbcMetric)
    def update_user_from_mailchimp_subscriber_info
    ^^^
commands/user/setup_mailchimp.rb:20:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for update_user_from_mailchimp_subscriber_info is too high. [8/6]
    def update_user_from_mailchimp_subscriber_info
    ^^^
commands/user/setup_mailchimp.rb:20:5: C: Metrics/PerceivedComplexity: Perceived complexity for update_user_from_mailchimp_subscriber_info is too high. [8/7]
    def update_user_from_mailchimp_subscriber_info
    ^^^
commands/user/setup_mailchimp.rb:21:42: W: Lint/AssignmentInCondition: Assignment in condition - you probably meant to use ==. (https://github.com/bbatsov/ruby-style-guide#safe-assignment-in-condition)
      return unless mailchimp_subscriber = MailchimpSubscriber.find_by(email: user.email)
                                         ^
commands/user/setup_mailchimp.rb:27:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      user.relationship_with_music = mailchimp_subscriber.relationship_with_music  if user.relationship_with_music.blank?
                                                                                                                        ^
commands/user/update_user_profile.rb:9:5: C: Metrics/AbcSize: Assignment Branch Condition size for execute is too high. [23.11/20] (http://c2.com/cgi/wiki?AbcMetric)
    def execute
    ^^^
commands/user/update_user_profile.rb:9:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def execute ...
    ^^^^^^^^^^^
commands/user/update_user_profile.rb:15:121: C: Metrics/LineLength: Line is too long. [133/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
          guestlisted_to_applied_ratio: user.event_attendees.in_state(:guestlisted, :confirmed, :cant_go).count / applied_count.to_f,
                                                                                                                        ^^^^^^^^^^^^^
commands/user/user_notifications.rb:40:11: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :async? :async
          ^^^^^^^^^^^^^^
commands/user/user_notifications.rb:41:11: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :force? :force
          ^^^^^^^^^^^^^^
commands/venue/notification.rb:6:19: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
    def initialize(model, user, merge_vars = {}, async = true, force = false, options = {})
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/venue/notification.rb:41:5: W: Lint/DuplicateMethods: Method Venue::Notification#email is defined at both /Users/graham/Sites/sofar-main/app/commands/venue/notification.rb:33 and /Users/graham/Sites/sofar-main/app/commands/venue/notification.rb:41.
    def email
    ^^^
commands/venue/notification.rb:65:11: C: Style/Alias: Use alias async? async instead of alias :async? :async. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :async? :async
          ^^^^^^^^^^^^^^
commands/venue/notification.rb:66:11: C: Style/Alias: Use alias force? force instead of alias :force? :force. (https://github.com/bbatsov/ruby-style-guide#alias-method)
    alias :force? :force
          ^^^^^^^^^^^^^^
commands/venue/send_initial_contact.rb:17:27: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
        'CONTACT_NAME' => "#{model.first_name}",
                          ^^^^^^^^^^^^^^^^^^^^^
commands/venue/send_initial_contact.rb:20:49: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
        'DISCOVERED_EXPLANATION' => (merge_vars.has_key?(:discovered_explanation) ? merge_vars[:discovered_explanation] : ''),
                                                ^^^^^^^^
commands/venue/send_initial_contact.rb:20:121: C: Metrics/LineLength: Line is too long. [126/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        'DISCOVERED_EXPLANATION' => (merge_vars.has_key?(:discovered_explanation) ? merge_vars[:discovered_explanation] : ''),
                                                                                                                        ^^^^^^
commands/venue/send_post_show_contact.rb:16:24: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      merge_vars.merge({ ...
                       ^
commands/venue/send_post_show_contact.rb:17:44: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
                         'CONTACT_NAME' => "#{model.first_name}",
                                           ^^^^^^^^^^^^^^^^^^^^^
commands/venue/send_pre_show_contact.rb:23:24: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      merge_vars.merge({ ...
                       ^
commands/venue/send_pre_show_contact.rb:24:44: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
                         'CONTACT_NAME' => "#{model.first_name}",
                                           ^^^^^^^^^^^^^^^^^^^^^
commands/venue/send_site_visit_contact.rb:16:24: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      merge_vars.merge({ ...
                       ^
commands/venue/send_site_visit_contact.rb:17:44: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
                         'CONTACT_NAME' => "#{model.first_name}",
                                           ^^^^^^^^^^^^^^^^^^^^^
commands/volunteer/send_host_request.rb:10:7: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
      if city.from_email.present? ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
commands/volunteer/send_host_request.rb:22:5: W: Lint/DuplicateMethods: Method Volunteer::SendHostRequest#email_model is defined at both /Users/graham/Sites/sofar-main/app/commands/volunteer/send_host_request.rb:5 and /Users/graham/Sites/sofar-main/app/commands/volunteer/send_host_request.rb:22.
    def email_model
    ^^^
controllers/about/hosts_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class About::HostsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^
controllers/about/hosts_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/about_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/admin/artist_competitions_controller.rb:31:121: C: Metrics/LineLength: Line is too long. [126/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      #                                     :post_description, :extra_prize_one, :extra_prize_two, :prize, :number_of_winners,
                                                                                                                        ^^^^^^
controllers/admin/artist_competitions_controller.rb:32:121: C: Metrics/LineLength: Line is too long. [125/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      #                                     :city_id, :event_id, :terms, :share_copy, :share_image, :background_image, :logo,
                                                                                                                        ^^^^^
controllers/admin/artist_competitions_controller.rb:33:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      #                                     :winner_copy, :winner_extra_prize_heading, :winner_extra_prize_description, :winner_extra_prize_link)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/cities/venues_controller.rb:2:9: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
  class Cities::VenuesController < Admin::VenuesController
        ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/cities/videos_controller.rb:2:9: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
  class Cities::VideosController < ApplicationController
        ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/competitions/entries_controller.rb:2:9: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
  class Competitions::EntriesController < ApplicationController
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/competitions/entries_controller.rb:3:5: C: Metrics/AbcSize: Assignment Branch Condition size for index is too high. [20.4/20] (http://c2.com/cgi/wiki?AbcMetric)
    def index
    ^^^
controllers/admin/competitions/entries_controller.rb:3:5: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def index ...
    ^^^^^^^^^
controllers/admin/competitions/entries_controller.rb:6:49: W: Lint/ShadowingOuterLocalVariable: Shadowing outer local variable - csv.
      csv = CSV.generate(encoding: 'utf-8') do |csv|
                                                ^^^
controllers/admin/competitions_controller.rb:64:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @entries = CompetitionShareLink.where(competition: @competition).order(competition_share_links_count: :desc, updated_at: :asc)
                                                                                                                        ^^^^^^^^^^^^
controllers/admin/event_attendees/no_show_controller.rb:2:9: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
  class EventAttendees::NoShowController < ApplicationController
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/event_attendees/transfers_controller.rb:2:9: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
  class EventAttendees::TransfersController < ApplicationController
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/event_attendees/transfers_controller.rb:3:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def create ...
    ^^^^^^^^^^
controllers/admin/events/event_attendees_controller.rb:42:121: C: Metrics/LineLength: Line is too long. [148/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            format.html { redirect_to admin_event_event_attendee_path(@event, @event_attendee), notice: 'Event attendee was successfully created.' }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/events/event_attendees_controller.rb:59:121: C: Metrics/LineLength: Line is too long. [148/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            format.html { redirect_to admin_event_event_attendee_path(@event, @event_attendee), notice: 'Event attendee was successfully updated.' }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/experiments/fixed_prices_controller.rb:6:121: C: Metrics/LineLength: Line is too long. [147/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        @control_events = Event.joins(:venue).where(test_type: '', venues: { rough_location: @fixed_price_events.pluck(:'venues.rough_location') })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/off_platform_event_performances_controller.rb:34:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      flash_message = @performance.save ? { notice: 'Performance created' } : { alert: @performance.errors.full_messages.to_sentence }
                                                                                                                        ^^^^^^^^^^^^^^
controllers/admin/off_platform_event_performances_controller.rb:80:5: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def performance_params ...
    ^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/off_platform_event_performances_controller.rb:81:7: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
      params.require(:off_platform_event_performance).permit( ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/payment_experiments_controller.rb:2:3: C: Metrics/ClassLength: Class has too many lines. [105/100]
  class PaymentExperimentsController < AdminController ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/payment_experiments_controller.rb:3:5: C: Metrics/MethodLength: Method has too many lines. [103/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def show ...
    ^^^^^^^^
controllers/admin/performances_controller.rb:41:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      flash_message = @performance.save ? { notice: 'Performance created' } : { alert: @performance.errors.full_messages.to_sentence }
                                                                                                                        ^^^^^^^^^^^^^^
controllers/admin/performances_controller.rb:87:5: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def performance_params ...
    ^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/performances_controller.rb:88:7: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
      params.require(:performance).permit( ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/photos_controller.rb:12:59: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      photo_importer = ImportPhoto.new(photo_params.merge({ event: @event }))
                                                          ^^^^^^^^^^^^^^^^^
controllers/admin/profiles_controller.rb:3:5: C: Rails/ActionFilter: Prefer before_action over before_filter.
    before_filter :authenticate_user!
    ^^^^^^^^^^^^^
controllers/admin/profiles_controller.rb:4:5: C: Rails/ActionFilter: Prefer before_action over before_filter.
    before_filter :check_admin_city_team_auth!
    ^^^^^^^^^^^^^
controllers/admin/promo_codes_controller.rb:4:7: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
      if params[:show] == 'user_promo_codes' ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/suggested_guestlists_controller.rb:8:69: C: Style/SymbolProc: Pass &:accept as an argument to each instead of a block.
      Sofar::Guestlist::Manager.new(event).suggested_guestlist.each do |attendee| ...
                                                                    ^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:2:3: C: Metrics/ClassLength: Class has too many lines. [105/100]
  class VenuesController < AdminController ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:3:5: C: Rails/ActionFilter: Prefer before_action over before_filter.
    before_filter :authenticate_user!
    ^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:4:5: C: Rails/ActionFilter: Prefer before_action over before_filter.
    before_filter :check_admin_city_team_auth!
    ^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:5:5: C: Rails/ActionFilter: Prefer before_action over before_filter.
    before_filter :set_city
    ^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:10:7: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
      if @city ...
      ^^^^^^^^
controllers/admin/venues_controller.rb:51:71: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      @team = User.with_any_role({ name: :manager, resource: @city }, { name: :team_member, resource: @city })
                                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:58:71: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      @team = User.with_any_role({ name: :manager, resource: @city }, { name: :team_member, resource: @city })
                                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:84:81: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      Venue::SendPreShowContact.new(venue, user, pre_show_params, false, false, { cc: params[:show_runner_email] }).notify
                                                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:84:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      Venue::SendPreShowContact.new(venue, user, pre_show_params, false, false, { cc: params[:show_runner_email] }).notify
                                                                                                                        ^^
controllers/admin/venues_controller.rb:114:7: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the same line as the last argument when opening brace is on the same line as the first argument.
      params.require(:venue).permit(:address, :city_id, :rough_location, :closest_station, ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/admin/venues_controller.rb:140:7: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
      if params[:city_id] ...
      ^^^^^^^^^^^^^^^^^^^
controllers/admin/vote_competitions_controller.rb:38:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @competition.breadcrumbs << { text: 'Edit Competition', link: edit_admin_event_vote_competition_path(@event, @competition) }
                                                                                                                        ^^^^^^^^^^
controllers/admin/vote_competitions_controller.rb:50:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        @competition.breadcrumbs << { text: 'Edit Competition', link: edit_admin_event_vote_competition_path(@event, @competition) }
                                                                                                                        ^^^^^^^^^^^^
controllers/admin/vote_competitions_controller.rb:66:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @entries = CompetitionShareLink.where(competition: @competition).order(competition_share_links_count: :desc, updated_at: :asc)
                                                                                                                        ^^^^^^^^^^^^
controllers/admin/vote_competitions_controller.rb:84:121: C: Metrics/LineLength: Line is too long. [123/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                                          :winner_extra_prize_link, :sofar_logo, :remove_sofar_logo, :brand_logo_max_width)
                                                                                                                        ^^^
controllers/api/v1/cities/events_controller.rb:10:9: C: Metrics/AbcSize: Assignment Branch Condition size for index is too high. [25.34/20] (http://c2.com/cgi/wiki?AbcMetric)
        def index
        ^^^
controllers/api/v1/cities/events_controller.rb:10:9: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
        def index ...
        ^^^^^^^^^
controllers/api/v1/cities/events_controller.rb:16:31: C: Style/BlockDelimiters: Avoid using {...} for multi-line blocks. (https://github.com/bbatsov/ruby-style-guide#single-line-blocks)
          events = events.map { |event|
                              ^
controllers/api/v1/commits_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class API::V1::CommitsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/api/v1/commits_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/api/v1/commits_controller.rb:3:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :verify_authenticity_token
  ^^^^^^^^^^^^^^^^^^
controllers/api/v1/registrations_controller.rb:8:7: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def create ...
      ^^^^^^^^^^
controllers/api/v1/video/views_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class API::V1::Video::ViewsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [316/100]
class ApplicationController < ActionController::Base ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:9:3: C: Rails/ActionFilter: Prefer skip_after_action over skip_after_filter.
  skip_after_filter :intercom_rails_auto_include
  ^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:18:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :store_current_location, unless: :devise_controller?
  ^^^^^^^^^^^^^
controllers/application_controller.rb:36:7: C: Style/PredicateName: Rename is_production_env? to production_env?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_production_env?
      ^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:40:3: C: Metrics/AbcSize: Assignment Branch Condition size for set_original_source is too high. [30.1/20] (http://c2.com/cgi/wiki?AbcMetric)
  def set_original_source
  ^^^
controllers/application_controller.rb:40:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for set_original_source is too high. [8/6]
  def set_original_source
  ^^^
controllers/application_controller.rb:40:3: C: Metrics/PerceivedComplexity: Perceived complexity for set_original_source is too high. [8/7]
  def set_original_source
  ^^^
controllers/application_controller.rb:68:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for get_ip is too high. [8/6]
  def get_ip
  ^^^
controllers/application_controller.rb:68:3: C: Metrics/PerceivedComplexity: Perceived complexity for get_ip is too high. [8/7]
  def get_ip
  ^^^
controllers/application_controller.rb:68:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_ip
      ^^^^^^
controllers/application_controller.rb:98:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_cities
      ^^^^^^^^^^
controllers/application_controller.rb:104:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_cities_near
      ^^^^^^^^^^^^^^^
controllers/application_controller.rb:105:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/application_controller.rb:107:121: C: Metrics/LineLength: Line is too long. [123/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @cities_near = ::City.indexed.order_by_distance(@client_latitude, @client_longitude).includes(:country).limit(3).load
                                                                                                                        ^^^
controllers/application_controller.rb:114:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_cities_alpha
      ^^^^^^^^^^^^^^^^
controllers/application_controller.rb:119:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_cities_total
      ^^^^^^^^^^^^^^^^
controllers/application_controller.rb:139:3: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def oauth_auth! ...
  ^^^^^^^^^^^^^^^
controllers/application_controller.rb:141:5: W: Lint/UselessAssignment: Useless assignment to variable - non_web_app_redirect. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    non_web_app_redirect  = 'urn:ietf:wg:oauth:2.0:oob'
    ^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:150:16: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
    auth_url = client.auth_code.authorize_url( ...
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:152:48: C: Style/LineEndConcatenation: Use \ instead of + or << to concatenate those strings.
      scope: 'https://docs.google.com/feeds/ ' +
                                               ^
controllers/application_controller.rb:153:63: C: Style/LineEndConcatenation: Use \ instead of + or << to concatenate those strings.
                       'https://docs.googleusercontent.com/ ' +
                                                              ^
controllers/application_controller.rb:166:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!, unless: :cms_page?
  ^^^^^^^^^^^^^
controllers/application_controller.rb:168:3: C: Metrics/AbcSize: Assignment Branch Condition size for after_sign_in_path_for is too high. [28.91/20] (http://c2.com/cgi/wiki?AbcMetric)
  def after_sign_in_path_for(resource)
  ^^^
controllers/application_controller.rb:168:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for after_sign_in_path_for is too high. [7/6]
  def after_sign_in_path_for(resource)
  ^^^
controllers/application_controller.rb:168:3: C: Metrics/PerceivedComplexity: Perceived complexity for after_sign_in_path_for is too high. [8/7]
  def after_sign_in_path_for(resource)
  ^^^
controllers/application_controller.rb:176:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      post_signup_url += "?city_id=#{params[:user][:home_city_id]}" if params[:user].present? && params[:user][:home_city_id].present?
                                                                                                                        ^^^^^^^^^^^^^^
controllers/application_controller.rb:184:31: W: Lint/UnusedMethodArgument: Unused method argument - resource_or_scope. If it's necessary, use _ or _resource_or_scope as an argument name to indicate that it won't be used. You can also write as after_sign_out_path_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def after_sign_out_path_for(resource_or_scope)
                              ^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:191:3: C: Metrics/AbcSize: Assignment Branch Condition size for track is too high. [29.48/20] (http://c2.com/cgi/wiki?AbcMetric)
  def track(message, properties = {})
  ^^^
controllers/application_controller.rb:191:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for track is too high. [8/6]
  def track(message, properties = {})
  ^^^
controllers/application_controller.rb:191:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def track(message, properties = {}) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:191:3: C: Metrics/PerceivedComplexity: Perceived complexity for track is too high. [8/7]
  def track(message, properties = {})
  ^^^
controllers/application_controller.rb:195:35: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    properties = properties.merge({ experiments: active_experiments })
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:196:35: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    properties = properties.merge({ current_utm_campaign: session[:current_utm_campaign], ...
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:214:5: W: Lint/UselessAssignment: Useless assignment to variable - user. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    user = mixpanel_distinct_id   if user.blank?
    ^^^^
controllers/application_controller.rb:228:7: C: Style/AccessorMethodName: Do not prefix writer method names with set_.
  def set_tracking_user(user = nil)
      ^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:260:3: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def configure_permitted_parameters ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:261:31: C: Style/Lambda: Use the lambda method for multiline lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
    permitted_devise_params = ->(u) do
                              ^^
controllers/application_controller.rb:262:7: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
      u.permit( ...
      ^^^^^^^^^
controllers/application_controller.rb:277:3: C: Metrics/AbcSize: Assignment Branch Condition size for content_not_found is too high. [21.42/20] (http://c2.com/cgi/wiki?AbcMetric)
  def content_not_found
  ^^^
controllers/application_controller.rb:281:7: W: Lint/UselessAssignment: Useless assignment to variable - msg. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      msg += " USER: #{current_user.display_name} #{current_user.email}"
      ^^^
controllers/application_controller.rb:284:56: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    Sofar::MixPanel.track(mixpanel_distinct_id, '404', { controller_name: controller_name, action_name: action_name })
                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:285:121: C: Metrics/LineLength: Line is too long. [160/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    redirect_to (request.referrer || root_path), flash: { error: 'Content not found. If problem persists, please email us: website@sofarsounds.com' } and return
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:288:3: C: Metrics/AbcSize: Assignment Branch Condition size for user_not_authorized is too high. [21.42/20] (http://c2.com/cgi/wiki?AbcMetric)
  def user_not_authorized
  ^^^
controllers/application_controller.rb:292:7: W: Lint/UselessAssignment: Useless assignment to variable - msg. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      msg += " USER: #{current_user.display_name} #{current_user.email}"
      ^^^
controllers/application_controller.rb:295:67: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    Sofar::MixPanel.track(mixpanel_distinct_id, 'Not authorized', { controller_name: controller_name, action_name: action_name })
                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:295:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Sofar::MixPanel.track(mixpanel_distinct_id, 'Not authorized', { controller_name: controller_name, action_name: action_name })
                                                                                                                        ^^^^^^^^^
controllers/application_controller.rb:318:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    user_signed_in? and (current_user.is_admin? || current_user.has_role?(:manager, :any) || current_user.has_role?(:team_member, :any))
                                                                                                                        ^^^^^^^^^^^^^^^^
controllers/application_controller.rb:328:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if resource.decorated?
    ^^
controllers/application_controller.rb:332:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    user_signed_in? && (current_user.is_admin? || current_user.is_manager?(resource) || current_user.is_team_member?(resource))
                                                                                                                        ^^^^^^^
controllers/application_controller.rb:336:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    redirect_to short_signin_path, flash: { alert: 'Access denied' } and return unless logged_in_and_has_access(resource)
                                                                                                                        ^
controllers/application_controller.rb:394:3: C: Metrics/AbcSize: Assignment Branch Condition size for expire_user_fragment is too high. [39/20] (http://c2.com/cgi/wiki?AbcMetric)
  def expire_user_fragment(user)
  ^^^
controllers/application_controller.rb:394:3: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def expire_user_fragment(user) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:423:3: C: Metrics/AbcSize: Assignment Branch Condition size for parse_datetime_params is too high. [33/20] (http://c2.com/cgi/wiki?AbcMetric)
  def parse_datetime_params params, label, utc_or_local = :local
  ^^^
controllers/application_controller.rb:423:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def parse_datetime_params params, label, utc_or_local = :local ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:423:29: C: Style/MethodDefParentheses: Use def with parentheses when there are parameters. (https://github.com/bbatsov/ruby-style-guide#method-parens)
  def parse_datetime_params params, label, utc_or_local = :local
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/application_controller.rb:424:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/application_controller.rb:440:5: W: Lint/UselessAssignment: Useless assignment to variable - home_city. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    home_city = user.home_city.nil? ? '' : user.home_city.title
    ^^^^^^^^^
controllers/application_controller.rb:444:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_page_meta_information
      ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/artists_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:index, :show]
  ^^^^^^^^^^^^^^^^^^
controllers/artists_controller.rb:89:16: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track_page({ id: @artist.id, slug: @artist.cached_slug, title: @artist.title, manager: (user_signed_in? and current_user.is_manager?(@artist)) })
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/artists_controller.rb:89:121: C: Metrics/LineLength: Line is too long. [149/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    track_page({ id: @artist.id, slug: @artist.cached_slug, title: @artist.title, manager: (user_signed_in? and current_user.is_manager?(@artist)) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Cities::ManageController < CitiesController
      ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:3:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:5:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :auth_access
  ^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:12:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [59.54/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/cities/manage_controller.rb:12:3: C: Metrics/MethodLength: Method has too many lines. [25/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/cities/manage_controller.rb:38:14: C: Performance/TimesMap: Use Array.new with a block instead of .times.map.
    months = 12.times.map { |i| (Date.today - (i).month).end_of_month }.reverse
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:38:39: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
    months = 12.times.map { |i| (Date.today - (i).month).end_of_month }.reverse
                                      ^^^^^
controllers/cities/manage_controller.rb:38:47: C: Style/RedundantParentheses: Don't use parentheses around a variable.
    months = 12.times.map { |i| (Date.today - (i).month).end_of_month }.reverse
                                              ^^^
controllers/cities/manage_controller.rb:43:14: C: Performance/TimesMap: Use Array.new with a block instead of .times.map.
    months = 12.times.map { |i| (Date.today - (i - 1).month).end_of_month }.reverse
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:43:39: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
    months = 12.times.map { |i| (Date.today - (i - 1).month).end_of_month }.reverse
                                      ^^^^^
controllers/cities/manage_controller.rb:45:106: C: Style/SymbolProc: Pass &:revenue as an argument to map instead of a block.
      [month.strftime('%B'), @city.events.where(start: month.beginning_of_month..month.end_of_month).map { |event| event.revenue }.reduce(0, :+)]
                                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:45:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      [month.strftime('%B'), @city.events.where(start: month.beginning_of_month..month.end_of_month).map { |event| event.revenue }.reduce(0, :+)]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:74:64: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
    @upcoming_events = Event.unscoped.where('start >= ?', Date.today).where('city_id = ?', @city.id).order('start ASC').paginate(page: params[:upcoming_events_page], per_page: 30)
                                                               ^^^^^
controllers/cities/manage_controller.rb:74:121: C: Metrics/LineLength: Line is too long. [179/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @upcoming_events = Event.unscoped.where('start >= ?', Date.today).where('city_id = ?', @city.id).order('start ASC').paginate(page: params[:upcoming_events_page], per_page: 30)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities/manage_controller.rb:75:59: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
    @past_events = Event.unscoped.where('start < ?', Date.today).where('city_id = ?', @city.id).order('start DESC').paginate(page: params[:past_events_page], per_page: 30)
                                                          ^^^^^
controllers/cities/manage_controller.rb:75:121: C: Metrics/LineLength: Line is too long. [171/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @past_events = Event.unscoped.where('start < ?', Date.today).where('city_id = ?', @city.id).order('start DESC').paginate(page: params[:past_events_page], per_page: 30)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:1:1: C: Metrics/ClassLength: Class has too many lines. [123/100]
class CitiesController < ApplicationController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:3:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:show, :index, :search]
  ^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:27:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [40.72/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/cities_controller.rb:27:3: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/cities_controller.rb:34:36: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    all_events = AllEvent.includes({ searchable: [{ city: :country }] })
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:35:121: C: Metrics/LineLength: Line is too long. [243/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                         .joins(ActiveRecord::Base.send(:sanitize_sql_array, ['LEFT OUTER JOIN event_attendees on (all_events.searchable_id = event_attendees.event_id AND event_attendees.user_id = ?)', (current_user ? current_user.id : nil)]))
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:39:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if params[:show_all] == 'true' ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:49:96: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      @near_cities_with_events = cities_nearby.joins(:events).where('events.start >= ?', (Time.now + 1.day).beginning_of_day).group(:id)
                                                                                               ^^^
controllers/cities_controller.rb:49:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @near_cities_with_events = cities_nearby.joins(:events).where('events.start >= ?', (Time.now + 1.day).beginning_of_day).group(:id)
                                                                                                                        ^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:88:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/cities_controller.rb:96:9: W: Lint/UselessAssignment: Useless assignment to variable - msg. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
        msg += " (#{@city.country.title})" if @city.country
        ^^^
controllers/cities_controller.rb:162:16: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track_page({ id: @city.id, slug: @city.cached_slug, title: @city.title, manager: (user_signed_in? and current_user.is_manager?(@city)) })
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:162:121: C: Metrics/LineLength: Line is too long. [141/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    track_page({ id: @city.id, slug: @city.cached_slug, title: @city.title, manager: (user_signed_in? and current_user.is_manager?(@city)) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^
controllers/cities_controller.rb:166:3: C: Metrics/MethodLength: Method has too many lines. [18/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def city_params ...
  ^^^^^^^^^^^^^^^
controllers/competitions_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/competitions_controller.rb:16:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [30.85/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/competitions_controller.rb:16:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for create is too high. [7/6]
  def create
  ^^^
controllers/competitions_controller.rb:16:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/competitions_controller.rb:21:16: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
    if session.has_key?(:competition_referrer)
               ^^^^^^^^
controllers/competitions_controller.rb:28:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @share_link = CompetitionShareLink.create(user: current_user, competition: @competition, referred_by: @referring_share_link)
                                                                                                                        ^^^^^^^^^^
controllers/competitions_controller.rb:39:34: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track('Competition Entered', { competition: @competition.uid })
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/competitions_controller.rb:46:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @current_user_link = CompetitionShareLink.find_by(user: current_user, competition: @referring_share_link.competition)
                                                                                                                        ^
controllers/concerns/event_grid.rb:6:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def setup_grid ...
  ^^^^^^^^^^^^^^
controllers/concerns/event_grid.rb:22:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def current_search_copy ...
  ^^^^^^^^^^^^^^^^^^^^^^^
controllers/concerns/event_grid.rb:27:5: W: Lint/EndAlignment: end at 27, 4 is not aligned with if at 23, 16.
    end
    ^^^
controllers/concerns/payment_form.rb:6:3: C: Metrics/AbcSize: Assignment Branch Condition size for set_payment_vars is too high. [21.31/20] (http://c2.com/cgi/wiki?AbcMetric)
  def set_payment_vars
  ^^^
controllers/concerns/payment_form.rb:6:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def set_payment_vars ...
  ^^^^^^^^^^^^^^^^^^^^
controllers/concerns/payment_form.rb:8:121: C: Metrics/LineLength: Line is too long. [125/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      args = { merchant_account_id: PaymentProcess::PaypalAnonymous::CURRENCY_TO_MERCHANT_ACCOUNT[@event.currency.downcase] }
                                                                                                                        ^^^^^
controllers/concerns/token_authentication.rb:5:5: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
    skip_before_filter :authenticate_user!, if: :has_token?
    ^^^^^^^^^^^^^^^^^^
controllers/concerns/token_authentication.rb:11:18: W: Lint/AssignmentInCondition: Assignment in condition - you probably meant to use ==. (https://github.com/bbatsov/ruby-style-guide#safe-assignment-in-condition)
    if @attendee = EventAttendee.find_by(token: params[:token])
                 ^
controllers/concerns/token_authentication.rb:20:7: C: Style/PredicateName: Rename has_token? to token?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def has_token?
      ^^^^^^^^^^
controllers/confirm_controller.rb:6:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/confirm_controller.rb:7:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user_from_token!
  ^^^^^^^^^^^^^
controllers/confirm_controller.rb:13:3: C: Metrics/AbcSize: Assignment Branch Condition size for yes is too high. [29.29/20] (http://c2.com/cgi/wiki?AbcMetric)
  def yes
  ^^^
controllers/confirm_controller.rb:13:3: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def yes ...
  ^^^^^^^
controllers/confirm_controller.rb:36:3: C: Metrics/AbcSize: Assignment Branch Condition size for pay is too high. [52.21/20] (http://c2.com/cgi/wiki?AbcMetric)
  def pay
  ^^^
controllers/confirm_controller.rb:36:3: C: Metrics/MethodLength: Method has too many lines. [30/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def pay ...
  ^^^^^^^
controllers/confirm_controller.rb:37:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/confirm_controller.rb:65:121: C: Metrics/LineLength: Line is too long. [152/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        redirect_to city_event_path(@event.city, @event, token: @attendee.token), notice: I18n.t(translation_key, first_name: @attendee.user.first_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/confirm_controller.rb:72:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def no ...
  ^^^^^^
controllers/confirm_controller.rb:102:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def attendee_params ...
  ^^^^^^^^^^^^^^^^^^^
controllers/confirms_controller.rb:6:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/contact_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/contests_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/continents_controller.rb:35:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/continents_controller.rb:87:16: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track_page({ id: @continent.id, slug: @continent.cached_slug, title: @continent.title, manager: (user_signed_in? and current_user.is_manager?(@continent)) })
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/continents_controller.rb:87:121: C: Metrics/LineLength: Line is too long. [161/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    track_page({ id: @continent.id, slug: @continent.cached_slug, title: @continent.title, manager: (user_signed_in? and current_user.is_manager?(@continent)) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/countries_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:index, :show]
  ^^^^^^^^^^^^^^^^^^
controllers/countries_controller.rb:82:16: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track_page({ id: @country.id, slug: @country.cached_slug, title: @country.title, manager: (user_signed_in? and current_user.is_manager?(@country)) })
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/countries_controller.rb:82:121: C: Metrics/LineLength: Line is too long. [153/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    track_page({ id: @country.id, slug: @country.cached_slug, title: @country.title, manager: (user_signed_in? and current_user.is_manager?(@country)) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/countries_controller.rb:87:121: C: Metrics/LineLength: Line is too long. [149/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    params.require(:country).permit(:title, :aliases, :continent_id, :currency, :currency_symbol, :currency_suffix, :minimum_donation, :url_facebook)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/dashes_controller.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [69.14/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/dashes_controller.rb:4:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for show is too high. [7/6]
  def show
  ^^^
controllers/dashes_controller.rb:4:3: C: Metrics/MethodLength: Method has too many lines. [27/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/dashes_controller.rb:4:3: C: Metrics/PerceivedComplexity: Perceived complexity for show is too high. [9/7]
  def show
  ^^^
controllers/dashes_controller.rb:9:94: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    event_ids = EventAttendee.joins(:event).not_in_state(:cant_go).where('start >= ?', (Time.now + 1.day).beginning_of_day).pluck(:event_id)
                                                                                             ^^^
controllers/dashes_controller.rb:9:121: C: Metrics/LineLength: Line is too long. [140/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    event_ids = EventAttendee.joins(:event).not_in_state(:cant_go).where('start >= ?', (Time.now + 1.day).beginning_of_day).pluck(:event_id)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^
controllers/dashes_controller.rb:10:121: C: Metrics/LineLength: Line is too long. [188/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @upcoming_events = current_user.applied_events.includes(city: :country, event_attendees: :transitions).where(id: event_ids).order('start ASC').decorate(context: { user: current_user })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/dashes_controller.rb:39:121: C: Metrics/LineLength: Line is too long. [176/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @not_entered_competitions = Competition.partner.user_has_not_entered(current_user).where('closing_date >= ?', Time.now).where(city_id: current_user.home_city.id).decorate
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/dashes_controller.rb:39:122: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      @not_entered_competitions = Competition.partner.user_has_not_entered(current_user).where('closing_date >= ?', Time.now).where(city_id: current_user.home_city.id).decorate
                                                                                                                         ^^^
controllers/data/charts_controller.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [233/100]
class Data::ChartsController < ApplicationController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:3:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Data::ChartsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:34:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_demand_by_week is too high. [27.17/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_demand_by_week
  ^^^
controllers/data/charts_controller.rb:39:121: C: Metrics/LineLength: Line is too long. [209/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Applied',             data: EventAttendee.joins(:event).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } },
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:39:174: C: Rails/TimeZone: Do not use DateTime.parse.strftime without zone. Use one of Time.zone.parse.strftime, DateTime.current, DateTime.parse.strftime.in_time_zone, DateTime.parse.strftime.utc, DateTime.parse.strftime.getlocal, DateTime.parse.strftime.iso8601, DateTime.parse.strftime.jisx0301, DateTime.parse.strftime.rfc3339, DateTime.parse.strftime.to_i, DateTime.parse.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      { name: 'Applied',             data: EventAttendee.joins(:event).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } },
                                                                                                                                                                             ^^^^^
controllers/data/charts_controller.rb:40:121: C: Metrics/LineLength: Line is too long. [218/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Invited & Confirmed', data: EventAttendee.joins(:event, :order).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') }   }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:40:182: C: Rails/TimeZone: Do not use DateTime.parse.strftime without zone. Use one of Time.zone.parse.strftime, DateTime.current, DateTime.parse.strftime.in_time_zone, DateTime.parse.strftime.utc, DateTime.parse.strftime.getlocal, DateTime.parse.strftime.iso8601, DateTime.parse.strftime.jisx0301, DateTime.parse.strftime.rfc3339, DateTime.parse.strftime.to_i, DateTime.parse.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      { name: 'Invited & Confirmed', data: EventAttendee.joins(:event, :order).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') }   }
                                                                                                                                                                                     ^^^^^
controllers/data/charts_controller.rb:46:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_throughput_by_week is too high. [38.12/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_throughput_by_week
  ^^^
controllers/data/charts_controller.rb:51:121: C: Metrics/LineLength: Line is too long. [219/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Invited & Confirmed', data: EventAttendee.joins(:event, :order).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') }   },
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:51:182: C: Rails/TimeZone: Do not use DateTime.parse.strftime without zone. Use one of Time.zone.parse.strftime, DateTime.current, DateTime.parse.strftime.in_time_zone, DateTime.parse.strftime.utc, DateTime.parse.strftime.getlocal, DateTime.parse.strftime.iso8601, DateTime.parse.strftime.jisx0301, DateTime.parse.strftime.rfc3339, DateTime.parse.strftime.to_i, DateTime.parse.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      { name: 'Invited & Confirmed', data: EventAttendee.joins(:event, :order).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') }   },
                                                                                                                                                                                     ^^^^^
controllers/data/charts_controller.rb:52:121: C: Metrics/LineLength: Line is too long. [228/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: '+1',                  data: EventAttendee.joins(:order, event: :plus_ones).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } },
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:52:193: C: Rails/TimeZone: Do not use DateTime.parse.strftime without zone. Use one of Time.zone.parse.strftime, DateTime.current, DateTime.parse.strftime.in_time_zone, DateTime.parse.strftime.utc, DateTime.parse.strftime.getlocal, DateTime.parse.strftime.iso8601, DateTime.parse.strftime.jisx0301, DateTime.parse.strftime.rfc3339, DateTime.parse.strftime.to_i, DateTime.parse.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      { name: '+1',                  data: EventAttendee.joins(:order, event: :plus_ones).where { event.city_id == cid }.group_by_week('event_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } },
                                                                                                                                                                                                ^^^^^
controllers/data/charts_controller.rb:53:121: C: Metrics/LineLength: Line is too long. [204/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Bands, Crew, VIPs',   data: VipAttendee.joins(:event).where { event.city_id == cid }.group_by_week('vip_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:53:170: C: Rails/TimeZone: Do not use DateTime.parse.strftime without zone. Use one of Time.zone.parse.strftime, DateTime.current, DateTime.parse.strftime.in_time_zone, DateTime.parse.strftime.utc, DateTime.parse.strftime.getlocal, DateTime.parse.strftime.iso8601, DateTime.parse.strftime.jisx0301, DateTime.parse.strftime.rfc3339, DateTime.parse.strftime.to_i, DateTime.parse.strftime.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      { name: 'Bands, Crew, VIPs',   data: VipAttendee.joins(:event).where { event.city_id == cid }.group_by_week('vip_attendees.created_at').count.rekey { |k| DateTime.parse(k.to_s).strftime('%d %b') } }
                                                                                                                                                                         ^^^^^
controllers/data/charts_controller.rb:59:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_demand_by_month is too high. [40.67/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_demand_by_month
  ^^^
controllers/data/charts_controller.rb:59:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for city_demand_by_month is too high. [7/6]
  def city_demand_by_month
  ^^^
controllers/data/charts_controller.rb:59:3: C: Metrics/MethodLength: Method has too many lines. [38/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def city_demand_by_month ...
  ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:64:121: C: Metrics/LineLength: Line is too long. [152/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    #   ["May", 2014], ["June", 2014], ["July", 2014], ["August", 2014], ["September", 2014], ["October", 2014], ["November", 2014], ["December", 2014],
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:71:20: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      month = Time.now - i.month
                   ^^^
controllers/data/charts_controller.rb:82:5: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
    for month in months
    ^^^
controllers/data/charts_controller.rb:83:38: C: Rails/TimeZone: Do not use DateTime.parse without zone. Use one of Time.zone.parse, DateTime.current, DateTime.parse.in_time_zone, DateTime.parse.utc, DateTime.parse.getlocal, DateTime.parse.iso8601, DateTime.parse.jisx0301, DateTime.parse.rfc3339, DateTime.parse.to_i, DateTime.parse.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      month_datetime      = DateTime.parse("#{month[0]} #{month[1]}")
                                     ^^^^^
controllers/data/charts_controller.rb:92:7: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
      for event in month_events
      ^^^
controllers/data/charts_controller.rb:95:9: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
        for attendee in event.event_attendees
        ^^^
controllers/data/charts_controller.rb:103:11: C: Metrics/BlockNesting: Avoid more than 3 levels of block nesting. (https://github.com/bbatsov/ruby-style-guide#three-is-the-number-thou-shalt-count)
          applied_log << attendee_user_id unless applied_log.include?(attendee_user_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:107:9: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
        for attendee in event.event_attendees.going
        ^^^
controllers/data/charts_controller.rb:115:11: C: Metrics/BlockNesting: Avoid more than 3 levels of block nesting. (https://github.com/bbatsov/ruby-style-guide#three-is-the-number-thou-shalt-count)
          confirmed_log << attendee_user_id unless confirmed_log.include?(attendee_user_id)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:136:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_throughput_by_month is too high. [28.16/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_throughput_by_month
  ^^^
controllers/data/charts_controller.rb:140:121: C: Metrics/LineLength: Line is too long. [161/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Invited & Confirmed', data: EventAttendee.going.joins(:event).where { event.city_id == cid }.group_by_month('event_attendees.created_at').count },
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:141:121: C: Metrics/LineLength: Line is too long. [172/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: '+1',                  data: EventAttendee.going.joins(event: :plus_ones).where { event.city_id == cid }.group_by_month('event_attendees.created_at').count },
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:142:121: C: Metrics/LineLength: Line is too long. [150/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Bands, Crew, VIPs',   data: VipAttendee.joins(:event).where { event.city_id == cid }.group_by_month('vip_attendees.created_at').count }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:150:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def revenue_by_week ...
  ^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:152:5: W: Lint/UselessAssignment: Useless assignment to variable - reserved_data. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    reserved_data = Hash[EventAttendee.reserved.group_by_week(:updated_at, last: 26).count]
    ^^^^^^^^^^^^^
controllers/data/charts_controller.rb:155:27: W: Lint/UnusedBlockArgument: Unused block argument - i. If it's necessary, use _ or _i as an argument name to indicate that it won't be used. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    pwyw_data.each do |e, i|
                          ^
controllers/data/charts_controller.rb:160:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Hat donations (cash)',          data: Event.group_by_week(:start, last: 26).sum(:on_the_night_donations) },
                                                                                                                        ^^
controllers/data/charts_controller.rb:176:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'Hat donations (cash)',         data: Event.group_by_month(:start, last: 6).sum(:on_the_night_donations) },
                                                                                                                        ^
controllers/data/charts_controller.rb:177:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: 'PWYW donations (online)',      data: EventAttendee.paid.group_by_month(:updated_at, last: 6).sum(:donation_amount) },
                                                                                                                        ^^^^^^^^^^^^
controllers/data/charts_controller.rb:184:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_revenue_by_week is too high. [46.62/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_revenue_by_week
  ^^^
controllers/data/charts_controller.rb:184:3: C: Metrics/MethodLength: Method has too many lines. [23/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def city_revenue_by_week ...
  ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:191:5: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
    for city in cities
    ^^^
controllers/data/charts_controller.rb:195:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      pwyw_data = EventAttendee.joins { event }.where { event.city_id == cid }.group_by_week(:start, last: 26).sum(:donation_amount)
                                                                                                                        ^^^^^^^^^^^^
controllers/data/charts_controller.rb:196:121: C: Metrics/LineLength: Line is too long. [157/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      reserved_data = Hash[EventAttendee.joins { event }.reserved.where { event.city_id == cid }.group_by_week(:start, last: 26) { |a| a.event.start }.count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:202:9: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
        if Settings.site.currency.primary == city.country.currency ...
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:217:3: C: Metrics/AbcSize: Assignment Branch Condition size for city_revenue_by_month is too high. [50.49/20] (http://c2.com/cgi/wiki?AbcMetric)
  def city_revenue_by_month
  ^^^
controllers/data/charts_controller.rb:217:3: C: Metrics/MethodLength: Method has too many lines. [24/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def city_revenue_by_month ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:225:5: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
    for city in cities
    ^^^
controllers/data/charts_controller.rb:229:121: C: Metrics/LineLength: Line is too long. [132/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      pwyw_data = EventAttendee.joins { event }.where { event.city_id == cid }.group_by_month(:start, last: 6).sum(:donation_amount)
                                                                                                                        ^^^^^^^^^^^^
controllers/data/charts_controller.rb:230:121: C: Metrics/LineLength: Line is too long. [178/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      reserved_data = Hash[EventAttendee.joins { event }.reserved.joins { event.city }.where { event.city_id == cid }.group_by_month(:start, last: 6) { |a| a.event.start }.count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:236:9: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
        if Settings.site.currency.primary == city.country.currency ...
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/charts_controller.rb:316:121: C: Metrics/LineLength: Line is too long. [123/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      { name: bracket || 'NULL (Not specified)', data: @event.applied_users.where(relationship_with_music: bracket).count }
                                                                                                                        ^^^
controllers/data/cities_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Data::CitiesController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^
controllers/data/cities_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :check_admin_auth!
  ^^^^^^^^^^^^^
controllers/data/cities_controller.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for index is too high. [20.62/20] (http://c2.com/cgi/wiki?AbcMetric)
  def index
  ^^^
controllers/data/cities_controller.rb:7:54: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    @onboarded_cities = City.onboarded_in_month(Time.now).count.size
                                                     ^^^
controllers/data/cities_controller.rb:8:54: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    @monetised_cities = City.monetised_in_month(Time.now).count.size
                                                     ^^^
controllers/data/cities_controller.rb:30:121: C: Metrics/LineLength: Line is too long. [194/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @cities             = City.where { (pay_what_you_want_on != true) && (reserve_tickets_on != true) && (use_off_platform_events != true) }.order('title ASC').paginate(page: page, per_page: 50)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/cities_controller.rb:43:121: C: Metrics/LineLength: Line is too long. [194/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @cities             = City.where { (pay_what_you_want_on != true) && (reserve_tickets_on != true) && (use_off_platform_events == true) }.order('title ASC').paginate(page: page, per_page: 50)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/cities_controller.rb:57:25: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    @month      = (Time.now - @backdate.month)
                        ^^^
controllers/data/events_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Data::EventsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^
controllers/data/membership_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Data::MembershipController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/membership_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/data/revenue_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Data::RevenueController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^
controllers/data/revenue_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/data/revenue_controller.rb:3:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :check_admin_auth!
  ^^^^^^^^^^^^^
controllers/data/revenue_controller.rb:9:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @paid_event_attendees = EventAttendee.going.order('updated_at DESC').paginate(page: params[:page], per_page: PER_PAGE)
                                                                                                                        ^^
controllers/data_controller.rb:4:1: C: Metrics/ClassLength: Class has too many lines. [121/100]
class DataController < ApplicationController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data_controller.rb:14:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!, only: :index
  ^^^^^^^^^^^^^
controllers/data_controller.rb:58:5: W: Lint/UselessAssignment: Useless assignment to variable - applies_per_user_count. Did you mean applies_per_user_len? (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    applies_per_user_count  = applies_per_user_arr.count
    ^^^^^^^^^^^^^^^^^^^^^^
controllers/data_controller.rb:63:121: C: Metrics/LineLength: Line is too long. [226/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    # applies_per_user_median = applies_per_user_len % 2 == 1 ? applies_per_user_sorted[applies_per_user_len/2] : (applies_per_user_sorted[applies_per_user_len/2 - 1] + applies_per_user_sorted[applies_per_user_len/2]).to_f / 2
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/data_controller.rb:113:3: C: Metrics/AbcSize: Assignment Branch Condition size for geo_signups is too high. [22.32/20] (http://c2.com/cgi/wiki?AbcMetric)
  def geo_signups
  ^^^
controllers/data_controller.rb:113:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for geo_signups is too high. [8/6]
  def geo_signups
  ^^^
controllers/data_controller.rb:113:3: C: Metrics/MethodLength: Method has too many lines. [38/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def geo_signups ...
  ^^^^^^^^^^^^^^^
controllers/data_controller.rb:113:3: C: Metrics/PerceivedComplexity: Perceived complexity for geo_signups is too high. [9/7]
  def geo_signups
  ^^^
controllers/data_controller.rb:119:5: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
    for member in db_members
    ^^^
controllers/data_controller.rb:146:5: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
    for country in Country.all
    ^^^
controllers/data_controller.rb:147:7: C: Style/For: Prefer each over for. (https://github.com/bbatsov/ruby-style-guide#no-for-loops)
      for city in country.cities
      ^^^
controllers/errors_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!, only: :index
  ^^^^^^^^^^^^^
controllers/event_attendees_controller.rb:5:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  GUEST_INFO_SAVED_NOTICE_LATER = 'Thanks, guest info saved. You will be asked for +1 details later, if selected.'.freeze
                                                                                                                        ^
controllers/event_attendees_controller.rb:36:5: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
    params.require(:event_attendee).permit( ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:1:1: C: Metrics/ClassLength: Class has too many lines. [296/100]
class Events::EmailsController < ApplicationController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::EmailsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/events/emails_controller.rb:4:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :auth_access
  ^^^^^^^^^^^^^
controllers/events/emails_controller.rb:11:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [41.67/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/events/emails_controller.rb:11:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for show is too high. [11/6]
  def show
  ^^^
controllers/events/emails_controller.rb:11:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/events/emails_controller.rb:11:3: C: Metrics/PerceivedComplexity: Perceived complexity for show is too high. [12/7]
  def show
  ^^^
controllers/events/emails_controller.rb:30:19: W: Lint/EndAlignment: end at 30, 18 is not aligned with if at 15, 17.
                  end
                  ^^^
controllers/events/emails_controller.rb:64:4: W: Lint/DefEndAlignment: end at 64, 3 is not aligned with def at 59, 2.
   end
   ^^^
controllers/events/emails_controller.rb:74:4: W: Lint/DefEndAlignment: end at 74, 3 is not aligned with def at 68, 2.
   end
   ^^^
controllers/events/emails_controller.rb:95:4: W: Lint/DefEndAlignment: end at 95, 3 is not aligned with def at 90, 2.
   end
   ^^^
controllers/events/emails_controller.rb:126:4: W: Lint/DefEndAlignment: end at 126, 3 is not aligned with def at 121, 2.
   end
   ^^^
controllers/events/emails_controller.rb:137:4: W: Lint/DefEndAlignment: end at 137, 3 is not aligned with def at 130, 2.
   end
   ^^^
controllers/events/emails_controller.rb:158:4: W: Lint/DefEndAlignment: end at 158, 3 is not aligned with def at 153, 2.
   end
   ^^^
controllers/events/emails_controller.rb:165:4: W: Lint/DefEndAlignment: end at 165, 3 is not aligned with def at 160, 2.
   end
   ^^^
controllers/events/emails_controller.rb:178:4: W: Lint/DefEndAlignment: end at 178, 3 is not aligned with def at 167, 2.
   end
   ^^^
controllers/events/emails_controller.rb:185:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Event::PostEventArtists.new(@event, false, true).notify(Performance.new(artist: Artist.new(email: current_user.email), event: @event))
                                                                                                                        ^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:281:3: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_to_all_and_render ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:295:22: W: Lint/StringConversionInInterpolation: Redundant use of Object#to_s in interpolation. (https://github.com/bbatsov/ruby-style-guide#no-to-s)
    track("#{@worker.to_s}: UI triggered", { event_attendee_ids: @attendees.map(&:id) })
                     ^^^^
controllers/events/emails_controller.rb:295:44: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track("#{@worker.to_s}: UI triggered", { event_attendee_ids: @attendees.map(&:id) })
                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/emails_controller.rb:339:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @sent       = @attendees.where { sent_emailed_24before == true }.count + vips.where { sent_emailed_24before == true }.count
                                                                                                                        ^^^^^^^
controllers/events/guestlist_controller.rb:2:1: C: Metrics/ClassLength: Class has too many lines. [121/100]
class Events::GuestlistController < Events::ManageController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:2:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::GuestlistController < Events::ManageController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:6:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!,  except: [:row]
  ^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:13:3: C: Metrics/AbcSize: Assignment Branch Condition size for csv is too high. [20.1/20] (http://c2.com/cgi/wiki?AbcMetric)
  def csv
  ^^^
controllers/events/guestlist_controller.rb:19:121: C: Metrics/LineLength: Line is too long. [174/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        csv << [attendee.user.display_name, attendee.user.email, attendee.user.age, attendee.user.gender, attendee.user.gigs_per_month, attendee.user.relationship_with_music]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:41:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    # @suggested_guestlist = EventAttendeeDecorator.decorate_collection(Sofar::Guestlist::Manager.new(@event).suggested_guestlist)
                                                                                                                        ^^^^^^^^^^
controllers/events/guestlist_controller.rb:118:30: C: Style/NumericLiterals: Separate every 3 digits in the integer portion of a number with underscores(_). (https://github.com/bbatsov/ruby-style-guide#underscores-in-numerics)
    @attendee.accept unless [86110, 90140].include?(@attendee.user.id)
                             ^^^^^
controllers/events/guestlist_controller.rb:118:37: C: Style/NumericLiterals: Separate every 3 digits in the integer portion of a number with underscores(_). (https://github.com/bbatsov/ruby-style-guide#underscores-in-numerics)
    @attendee.accept unless [86110, 90140].include?(@attendee.user.id)
                                    ^^^^^
controllers/events/guestlist_controller.rb:149:3: C: Metrics/AbcSize: Assignment Branch Condition size for assign_segment_data is too high. [48.43/20] (http://c2.com/cgi/wiki?AbcMetric)
  def assign_segment_data
  ^^^
controllers/events/guestlist_controller.rb:149:3: C: Metrics/MethodLength: Method has too many lines. [27/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def assign_segment_data ...
  ^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:161:121: C: Metrics/LineLength: Line is too long. [252/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 18), bracket]).count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:161:221: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 18), bracket]).count]
                                                                                                                                                                                                                            ^^^
controllers/events/guestlist_controller.rb:163:121: C: Metrics/LineLength: Line is too long. [311/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 25), (Time.now.year - 18), bracket]).count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:163:258: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 25), (Time.now.year - 18), bracket]).count]
                                                                                                                                                                                                                                                                 ^^^
controllers/events/guestlist_controller.rb:163:280: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 25), (Time.now.year - 18), bracket]).count]
                                                                                                                                                                                                                                                                                       ^^^
controllers/events/guestlist_controller.rb:165:121: C: Metrics/LineLength: Line is too long. [311/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 34), (Time.now.year - 26), bracket]).count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:165:258: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 34), (Time.now.year - 26), bracket]).count]
                                                                                                                                                                                                                                                                 ^^^
controllers/events/guestlist_controller.rb:165:280: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 34), (Time.now.year - 26), bracket]).count]
                                                                                                                                                                                                                                                                                       ^^^
controllers/events/guestlist_controller.rb:167:121: C: Metrics/LineLength: Line is too long. [311/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 49), (Time.now.year - 35), bracket]).count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:167:258: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 49), (Time.now.year - 35), bracket]).count]
                                                                                                                                                                                                                                                                 ^^^
controllers/events/guestlist_controller.rb:167:280: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) >= ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 49), (Time.now.year - 35), bracket]).count]
                                                                                                                                                                                                                                                                                       ^^^
controllers/events/guestlist_controller.rb:169:121: C: Metrics/LineLength: Line is too long. [252/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 50), bracket]).count]
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/guestlist_controller.rb:169:221: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        [bracket, @accepted_users.where(["(birth_year IS NOT null AND birth_year != '' AND birth_year != ? AND CAST(birth_year AS INTEGER) <= ?) or (birth_year IS NULL AND age = ?)", User::NO_BIRTH_YEAR_SPECIFIED, (Time.now.year - 50), bracket]).count]
                                                                                                                                                                                                                            ^^^
controllers/events/manage_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::ManageController < EventsController
      ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/names_and_emails_controller.rb:3:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::NamesAndEmailsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/names_and_emails_controller.rb:5:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/events/names_and_emails_controller.rb:13:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [31.42/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/events/names_and_emails_controller.rb:13:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/events/print_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::PrintController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/print_controller.rb:6:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/events/revenue_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::RevenueController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/revenue_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/events/revenue_controller.rb:4:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :auth_access
  ^^^^^^^^^^^^^
controllers/events/revenue_controller.rb:12:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @reserved_attendees        = @event.event_attendees.preload(:user, reservation: [:plus_one, :plus_two]).joins(:reservation)
                                                                                                                        ^^^^^^^
controllers/events/revenue_controller.rb:14:121: C: Metrics/LineLength: Line is too long. [146/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @donated_attendees         = @event.event_attendees.includes(:user, donation: [:plus_one]).joins(:donation).order('orders.tickets_count DESC')
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/stats_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Events::StatsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^
controllers/events/stats_controller.rb:4:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/events/stats_controller.rb:10:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [32.89/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/events/stats_controller.rb:10:3: C: Metrics/MethodLength: Method has too many lines. [27/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/events_controller.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [235/100]
class EventsController < ApplicationController ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:6:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  before_action :set_event,      only: [:show, :edit, :update, :destroy, :apply, :apply_with_credit, :unapply, :apply_and_extras]
                                                                                                                        ^^^^^^^^^
controllers/events_controller.rb:13:121: C: Metrics/LineLength: Line is too long. [126/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  before_action :authorize_resource, except: [:index, :show, :apply, :apply_with_credit, :unapply, :apply_and_extras, :create]
                                                                                                                        ^^^^^^
controllers/events_controller.rb:27:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:show, :index]
  ^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:29:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [39.92/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/events_controller.rb:29:3: C: Metrics/MethodLength: Method has too many lines. [20/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/events_controller.rb:35:69: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
      @near_cities_with_events = cities_nearby.joins(:events).where("events.start >= ?", (Time.now + 1.day).beginning_of_day).group(:id)
                                                                    ^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:35:96: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      @near_cities_with_events = cities_nearby.joins(:events).where("events.start >= ?", (Time.now + 1.day).beginning_of_day).group(:id)
                                                                                               ^^^
controllers/events_controller.rb:35:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @near_cities_with_events = cities_nearby.joins(:events).where("events.start >= ?", (Time.now + 1.day).beginning_of_day).group(:id)
                                                                                                                        ^^^^^^^^^^^^^^^^
controllers/events_controller.rb:79:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [20.12/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/events_controller.rb:79:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/events_controller.rb:96:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def update ...
  ^^^^^^^^^^
controllers/events_controller.rb:118:3: C: Metrics/AbcSize: Assignment Branch Condition size for apply is too high. [34.67/20] (http://c2.com/cgi/wiki?AbcMetric)
  def apply
  ^^^
controllers/events_controller.rb:118:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for apply is too high. [9/6]
  def apply
  ^^^
controllers/events_controller.rb:118:3: C: Metrics/MethodLength: Method has too many lines. [18/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def apply ...
  ^^^^^^^^^
controllers/events_controller.rb:118:3: C: Metrics/PerceivedComplexity: Perceived complexity for apply is too high. [9/7]
  def apply
  ^^^
controllers/events_controller.rb:128:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if @attendee.present?
    ^^
controllers/events_controller.rb:161:5: W: Lint/EndAlignment: end at 161, 4 is not aligned with if at 157, 12.
    end
    ^^^
controllers/events_controller.rb:175:65: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
      @upcoming_events  = @city.events.where('start >= ?', Date.today).order('start ASC')
                                                                ^^^^^
controllers/events_controller.rb:176:64: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
      @past_events      = @city.events.where('start < ?', Date.today).order('start DESC')
                                                               ^^^^^
controllers/events_controller.rb:178:58: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
      @upcoming_events  = Event.where('start >= ?', Date.today).order('start ASC')
                                                         ^^^^^
controllers/events_controller.rb:179:57: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
      @past_events      = Event.where('start < ?', Date.today).order('start DESC')
                                                        ^^^^^
controllers/events_controller.rb:193:16: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    track_page({ id: @event.id, uuid: @event.uuid, title: @event.display_name, manager: (user_signed_in? and current_user.is_manager?(@event)) })
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:193:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    track_page({ id: @event.id, uuid: @event.uuid, title: @event.display_name, manager: (user_signed_in? and current_user.is_manager?(@event)) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:197:3: C: Metrics/AbcSize: Assignment Branch Condition size for assign_summary_stats is too high. [63.98/20] (http://c2.com/cgi/wiki?AbcMetric)
  def assign_summary_stats
  ^^^
controllers/events_controller.rb:197:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for assign_summary_stats is too high. [7/6]
  def assign_summary_stats
  ^^^
controllers/events_controller.rb:197:3: C: Metrics/MethodLength: Method has too many lines. [30/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def assign_summary_stats ...
  ^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:197:3: C: Metrics/PerceivedComplexity: Perceived complexity for assign_summary_stats is too high. [8/7]
  def assign_summary_stats
  ^^^
controllers/events_controller.rb:224:7: C: Style/SelfAssignment: Use self-assignment shorthand *=. (https://github.com/bbatsov/ruby-style-guide#self-assignment)
      @aim_count              = @aim_count * (1 + (@event.city.dropoff_paid * 0.01)) # 10% no show
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:228:9: C: Style/SelfAssignment: Use self-assignment shorthand *=. (https://github.com/bbatsov/ruby-style-guide#self-assignment)
        @aim_count = @aim_count * (1 + (@event.city.dropoff_free * 0.01)) # 40% no show
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:229:7: W: Lint/HandleExceptions: Do not suppress exceptions. (https://github.com/bbatsov/ruby-style-guide#dont-hide-exceptions)
      rescue
      ^^^^^^
controllers/events_controller.rb:235:5: C: Style/SelfAssignment: Use self-assignment shorthand *=. (https://github.com/bbatsov/ruby-style-guide#self-assignment)
    @aim_count                = @aim_count * 0.4 # 60% need +1
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/events_controller.rb:244:3: C: Metrics/AbcSize: Assignment Branch Condition size for event_params is too high. [81.67/20] (http://c2.com/cgi/wiki?AbcMetric)
  def event_params
  ^^^
controllers/events_controller.rb:244:3: C: Metrics/MethodLength: Method has too many lines. [39/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def event_params ...
  ^^^^^^^^^^^^^^^^
controllers/events_controller.rb:266:33: C: Style/NilComparison: Prefer the use of the nil? predicate. (https://github.com/bbatsov/ruby-style-guide#predicate-methods)
      params[:event][:venue_id] == nil
                                ^^
controllers/events_controller.rb:284:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                         :closest_station, :map_url, :street_view_url, :city_id, :first_name, :last_name, :email_address,
                                                                                                                        ^
controllers/events_controller.rb:291:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    params.require(:user).permit(:first_name, :last_name, :relationship_with_music, :age, :gigs_per_month, :why_want_to_come, :gender)
                                                                                                                        ^^^^^^^^^^^^^^
controllers/events_controller.rb:298:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_venues
      ^^^^^^^^^^
controllers/faq_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/home_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/home_controller.rb:7:3: C: Metrics/AbcSize: Assignment Branch Condition size for index is too high. [31.97/20] (http://c2.com/cgi/wiki?AbcMetric)
  def index
  ^^^
controllers/home_controller.rb:7:3: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def index ...
  ^^^^^^^^^
controllers/home_controller.rb:14:5: W: Lint/EndAlignment: end at 14, 4 is not aligned with if at 10, 26.
    end
    ^^^
controllers/how_it_works_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/legal_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/minisite/axe_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Minisite::AxeController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^
controllers/minisite/axe_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/off_platform_events_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/off_platform_events_controller.rb:6:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :auth_access
  ^^^^^^^^^^^^^
controllers/off_platform_events_controller.rb:32:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/off_platform_events_controller.rb:38:121: C: Metrics/LineLength: Line is too long. [128/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        format.html { redirect_to city_off_platform_events_path(@city), notice: 'Off platform event was successfully created.' }
                                                                                                                        ^^^^^^^^
controllers/off_platform_events_controller.rb:52:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        format.html { redirect_to city_off_platform_event_path(@city, @event), notice: 'Event was successfully updated.' }
                                                                                                                        ^^
controllers/orders_controller.rb:6:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [36.69/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/orders_controller.rb:6:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/orders_controller.rb:7:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/orders_controller.rb:24:121: C: Metrics/LineLength: Line is too long. [155/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      redirect_to city_event_path(attendee.event.city, attendee.event), notice: I18n.t('payment.reservation_success', first_name: attendee.user.first_name)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/orders_controller.rb:28:3: C: Metrics/AbcSize: Assignment Branch Condition size for update is too high. [30.61/20] (http://c2.com/cgi/wiki?AbcMetric)
  def update
  ^^^
controllers/orders_controller.rb:28:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def update ...
  ^^^^^^^^^^
controllers/orders_controller.rb:29:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/orders_controller.rb:51:62: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    redirect_to city_event_reserve_path(@event.city, @event, { promo_code: { code: params[:order][:promo_code] } }), alert: message
                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/orders_controller.rb:51:121: C: Metrics/LineLength: Line is too long. [131/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    redirect_to city_event_reserve_path(@event.city, @event, { promo_code: { code: params[:order][:promo_code] } }), alert: message
                                                                                                                        ^^^^^^^^^^^
controllers/orders_controller.rb:70:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def order_reservation_params ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/orders_controller.rb:71:5: C: Style/MultilineMethodCallBraceLayout: Closing method call brace must be on the line after the last argument when opening brace is on a separate line from the first argument.
    params.require(:order_reservation).permit( ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/payments_controller.rb:19:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [21.61/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/payments_controller.rb:19:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/phone_numbers_controller.rb:11:121: C: Metrics/LineLength: Line is too long. [152/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @mobile_number_params ||= params.require(:user).permit(mobile: [:country_code, :number_body]).merge(mobile_notification_on: mobile_notification_on?)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/redeem_promo_codes_controller.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [20.83/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/redeem_promo_codes_controller.rb:4:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/redeem_promo_codes_controller.rb:26:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [21.1/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/redeem_promo_codes_controller.rb:26:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/redeem_promo_codes_controller.rb:39:121: C: Metrics/LineLength: Line is too long. [142/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @attendee = EventAttendee::AutoConfirmation.new(@attendee, plus_one_params, @promo_code).prepare_attendee unless @attendee.is_confirmed?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals/emails_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Referrals::EmailsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals/emails_controller.rb:6:121: C: Metrics/LineLength: Line is too long. [141/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      redirect_to invite_index_path, notice: "We've sent an email to your friends. As soon as they sign up you'll get a free pair of tickets"
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^
controllers/referrals/signups_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Referrals::SignupsController < ApplicationController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals/signups_controller.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [28.44/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/referrals/signups_controller.rb:10:53: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    @events = EventsDecorator.new(AllEvent.includes({ searchable: [{ city: :country }] })
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals/signups_controller.rb:11:121: C: Metrics/LineLength: Line is too long. [226/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        .joins(ActiveRecord::Base.send(:sanitize_sql_array, ['LEFT OUTER JOIN event_attendees on (all_events.searchable_id = event_attendees.event_id AND event_attendees.user_id = ?)', (current_user ? current_user.id : nil)]))
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:show]
  ^^^^^^^^^^^^^^^^^^
controllers/referrals_controller.rb:14:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [38.85/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/referrals_controller.rb:14:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/referrals_controller.rb:20:53: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    @events = EventsDecorator.new(AllEvent.includes({ searchable: [{ city: :country }] })
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals_controller.rb:21:121: C: Metrics/LineLength: Line is too long. [226/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        .joins(ActiveRecord::Base.send(:sanitize_sql_array, ['LEFT OUTER JOIN event_attendees on (all_events.searchable_id = event_attendees.event_id AND event_attendees.user_id = ?)', (current_user ? current_user.id : nil)]))
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/referrals_controller.rb:26:121: C: Metrics/LineLength: Line is too long. [139/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    redirect_to dashboard_path, alert: I18n.t('referrals.already_signed_up', link: invite_index_path).html_safe if current_user && !@signup
                                                                                                                        ^^^^^^^^^^^^^^^^^^^
controllers/registrations_controller.rb:15:33: W: Lint/AssignmentInCondition: Assignment in condition - you probably meant to use ==. (https://github.com/bbatsov/ruby-style-guide#safe-assignment-in-condition)
    return unless existing_user = User.find_by(email: params[:user][:email])
                                ^
controllers/registrations_controller.rb:36:121: C: Metrics/LineLength: Line is too long. [180/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    params.require(:user).permit(:first_name, :last_name, :birth_year, :gender, :city_other, :home_city_id, :email_setting_marketing, :email_setting_offers, :email_setting_unlucky)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/reserve_registrations_controller.rb:4:30: W: Lint/UnusedMethodArgument: Unused method argument - resource. If it's necessary, use _ or _resource as an argument name to indicate that it won't be used. You can also write as after_sign_up_path_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def after_sign_up_path_for(resource)
                             ^^^^^^^^
controllers/reserve_sessions_controller.rb:4:30: W: Lint/UnusedMethodArgument: Unused method argument - resource. If it's necessary, use _ or _resource as an argument name to indicate that it won't be used. You can also write as after_sign_in_path_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def after_sign_in_path_for(resource)
                             ^^^^^^^^
controllers/reserved_controller.rb:4:3: C: Metrics/AbcSize: Assignment Branch Condition size for edit is too high. [22.45/20] (http://c2.com/cgi/wiki?AbcMetric)
  def edit
  ^^^
controllers/reserved_controller.rb:4:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def edit ...
  ^^^^^^^^
controllers/reserves_controller.rb:10:3: C: Metrics/AbcSize: Assignment Branch Condition size for show is too high. [40.07/20] (http://c2.com/cgi/wiki?AbcMetric)
  def show
  ^^^
controllers/reserves_controller.rb:10:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for show is too high. [7/6]
  def show
  ^^^
controllers/reserves_controller.rb:10:3: C: Metrics/MethodLength: Method has too many lines. [24/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def show ...
  ^^^^^^^^
controllers/reserves_controller.rb:10:3: C: Metrics/PerceivedComplexity: Perceived complexity for show is too high. [8/7]
  def show
  ^^^
controllers/reserves_controller.rb:20:121: C: Metrics/LineLength: Line is too long. [123/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      Charge.new(amount: @event.reserve_price_three * 100, tickets: [Ticket.new, Ticket::PlusOne.new, Ticket::PlusTwo.new])
                                                                                                                        ^^^
controllers/reserves_controller.rb:27:7: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
      if @promo_code_class == 'valid'
      ^^
controllers/reserves_controller.rb:43:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
controllers/reserves_controller.rb:61:62: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    redirect_to city_event_reserve_path(@event.city, @event, { promo_code: { code: params[:order][:promo_code] } }), alert: message
                                                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/reserves_controller.rb:61:121: C: Metrics/LineLength: Line is too long. [131/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    redirect_to city_event_reserve_path(@event.city, @event, { promo_code: { code: params[:order][:promo_code] } }), alert: message
                                                                                                                        ^^^^^^^^^^^
controllers/revenue_controller.rb:2:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/revenue_controller.rb:3:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :check_admin_auth!
  ^^^^^^^^^^^^^
controllers/sessions_controller.rb:21:121: C: Metrics/LineLength: Line is too long. [218/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        flash.now[:error] = "It looks like you may have subscribed to our monthly newsletter, but havent created an account on our website yet - try #{view_context.link_to("signing up", short_signup_path)}.".html_safe
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/sessions_controller.rb:21:174: C: Style/StringLiteralsInInterpolation: Prefer single-quoted strings inside interpolations.
        flash.now[:error] = "It looks like you may have subscribed to our monthly newsletter, but havent created an account on our website yet - try #{view_context.link_to("signing up", short_signup_path)}.".html_safe
                                                                                                                                                                             ^^^^^^^^^^^^
controllers/sessions_controller.rb:45:54: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
    if @beta_user && @beta_user != 'true' && !params.has_key?(:user)
                                                     ^^^^^^^^
controllers/sessions_controller.rb:54:31: W: Lint/UnusedMethodArgument: Unused method argument - resource. If it's necessary, use _ or _resource as an argument name to indicate that it won't be used. You can also write as after_sign_out_path_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def after_sign_out_path_for(resource)
                              ^^^^^^^^
controllers/sitemaps_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/sitemaps_controller.rb:10:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def index ...
  ^^^^^^^^^
controllers/songs_controller.rb:96:14: W: Lint/AssignmentInCondition: Assignment in condition - you probably meant to use ==. (https://github.com/bbatsov/ruby-style-guide#safe-assignment-in-condition)
    if @song = Song.find_using_slug(params[:id])
             ^
controllers/songs_controller.rb:97:18: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      track_page({ id: @song.id, title: @song.title, artist_id: @song.magic_artist_id, artist_title: @song.magic_artist_title, manager: logged_in_and_has_access(@song) })
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/songs_controller.rb:97:121: C: Metrics/LineLength: Line is too long. [170/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      track_page({ id: @song.id, title: @song.title, artist_id: @song.magic_artist_id, artist_title: @song.magic_artist_title, manager: logged_in_and_has_access(@song) })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/team_members_controller.rb:6:88: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    @team_members = User.with_any_role({ name: :manager, resource: undecorated_city }, { name: :team_member, resource: undecorated_city })
                                                                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/team_members_controller.rb:6:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @team_members = User.with_any_role({ name: :manager, resource: undecorated_city }, { name: :team_member, resource: undecorated_city })
                                                                                                                        ^^^^^^^^^^^^^^^^^^
controllers/team_members_controller.rb:16:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [25.67/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/team_members_controller.rb:16:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/team_members_controller.rb:76:121: C: Metrics/LineLength: Line is too long. [143/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    team_member.has_role?(:team_member, undecorated_city) || team_member.has_role?(:manager, undecorated_city) || team_member.has_role?(:admin)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^
controllers/team_members_controller.rb:80:5: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
    ['manager', 'team_member']
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/uber_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!, only: [:index]
  ^^^^^^^^^^^^^^^^^^
controllers/uber_controller.rb:4:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :set_comp
  ^^^^^^^^^^^^^
controllers/uber_controller.rb:5:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :set_entry
  ^^^^^^^^^^^^^
controllers/uber_controller.rb:36:121: C: Metrics/LineLength: Line is too long. [139/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @entry = CompetitionEntry.create(city_name: city_name, user: current_user, email: current_user.email, competition: @comp) unless @entry
                                                                                                                        ^^^^^^^^^^^^^^^^^^^
controllers/users/omniauth_callbacks_controller.rb:1:7: C: Style/ClassAndModuleChildren: Use nested module/class definitions instead of compact style.
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/users/omniauth_callbacks_controller.rb:2:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def self.provides_callback_for(provider) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/users_controller.rb:4:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/users_controller.rb:5:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :check_admin_city_team_auth!, except: :finish_signup
  ^^^^^^^^^^^^^
controllers/users_controller.rb:103:121: C: Metrics/LineLength: Line is too long. [500/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    params.require(:user).permit(:email, :is_premium_member, :is_founder_member, :ticket_credits, :is_interested_membership, :first_name, :last_name, :city_other, :relationship_with_music, :age, :gigs_per_month, :is_interested_volunteer, :contact_via_email, :suggest_artist, :how_heard_about, :profession, :rating, :email_type, :timezone, :last_changed, :gmtoff, :dstoff, :why_want_to_come, :gender, :city_name, :general_notes, :membership_notes, :support_notes, :home_city_id, :latitude, :longitude)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
controllers/videos_controller.rb:10:3: C: Metrics/AbcSize: Assignment Branch Condition size for index is too high. [27.91/20] (http://c2.com/cgi/wiki?AbcMetric)
  def index
  ^^^
controllers/videos_controller.rb:10:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def index ...
  ^^^^^^^^^
controllers/videos_controller.rb:17:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if params[:filters]
    ^^
controllers/videos_controller.rb:60:121: C: Metrics/LineLength: Line is too long. [124/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @cities_with_videos = City.joins(:videos).where(id: nearby_cities.pluck(:id)).where.not(id: @video.city.try(:id)).uniq
                                                                                                                        ^^^^
controllers/vip_attendees_controller.rb:5:3: C: Rails/ActionFilter: Prefer before_action over before_filter.
  before_filter :authenticate_user!
  ^^^^^^^^^^^^^
controllers/vip_attendees_controller.rb:38:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [21.31/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/vip_attendees_controller.rb:38:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/vip_attendees_controller.rb:44:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        PostActionNotification::WelcomeVip.new(@vip_attendee).notify if @event.city.use_new_notifications? && @event.is_published?
                                                                                                                        ^^^^^^^^^^
controllers/vip_attendees_controller.rb:47:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        format.json { render action: 'show', status: :created, location: event_vip_attendee_path(@event, @vip_attendee) }
                                                                                                                        ^
controllers/vote_competitions_controller.rb:2:3: C: Rails/ActionFilter: Prefer skip_before_action over skip_before_filter.
  skip_before_filter :authenticate_user!
  ^^^^^^^^^^^^^^^^^^
controllers/vote_competitions_controller.rb:16:3: C: Metrics/AbcSize: Assignment Branch Condition size for create is too high. [24.66/20] (http://c2.com/cgi/wiki?AbcMetric)
  def create
  ^^^
controllers/vote_competitions_controller.rb:16:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def create ...
  ^^^^^^^^^^
controllers/vote_competitions_controller.rb:21:16: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
    if session.has_key?(:competition_referrer)
               ^^^^^^^^
controllers/vote_competitions_controller.rb:28:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @share_link = CompetitionShareLink.create(user: current_user, competition: @competition, referred_by: @referring_share_link)
                                                                                                                        ^^^^^^^^^^
controllers/vote_competitions_controller.rb:38:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @current_user_link = CompetitionShareLink.find_by(user: current_user, competition: @referring_share_link.competition)
                                                                                                                        ^
controllers/whos_played_controller.rb:21:5: C: Style/NegatedWhile: Favor until over while for negative conditions. (https://github.com/bbatsov/ruby-style-guide#until-for-negatives)
    while albums.!empty? ...
    ^^^^^^^^^^^^^^^^^^^^
decorators/admin/payment_experiment_decorator.rb:57:121: C: Metrics/LineLength: Line is too long. [140/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      h.render partial: partial, object: h.number_to_percentage(percent_diff, precision: 2), locals: { value: block_given? ? yield : value }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^
decorators/admin/venues_decorator.rb:4:121: C: Metrics/LineLength: Line is too long. [175/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      object.map { |venue| ["#{venue.rough_location.try(:upcase)} #{venue.address.try(:truncate, 40, seperator: ' ', ommision: '...')} - (Cap: #{venue.capacity})", venue.id] }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/city_decorator.rb:43:7: C: Style/PredicateName: Rename is_manager? to manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_manager?(member)
      ^^^^^^^^^^^
decorators/city_decorator.rb:47:7: C: Style/PredicateName: Rename is_team_member? to team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_team_member?(member)
      ^^^^^^^^^^^^^^^
decorators/city_decorator.rb:99:41: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
      h.haml_tag :a, 'View Less', href: "#{h.city_short_path(object)}"
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/competition_decorator.rb:1:1: C: Metrics/ClassLength: Class has too many lines. [102/100]
class CompetitionDecorator < Draper::Decorator ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/competition_decorator.rb:31:3: C: Metrics/AbcSize: Assignment Branch Condition size for closing_date is too high. [20.1/20] (http://c2.com/cgi/wiki?AbcMetric)
  def closing_date
  ^^^
decorators/competition_decorator.rb:39:3: C: Metrics/AbcSize: Assignment Branch Condition size for prize is too high. [22.09/20] (http://c2.com/cgi/wiki?AbcMetric)
  def prize
  ^^^
decorators/competition_decorator.rb:81:10: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    Time.now > object.closing_date
         ^^^
decorators/competition_decorator.rb:111:121: C: Metrics/LineLength: Line is too long. [151/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    return h.haml_tag :img, src: h.attachment_url(object, :logo, :limit_width, 250), class: 'announcement-banner-image img-responsive' if logo.present?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_attendee_decorator.rb:10:3: C: Metrics/AbcSize: Assignment Branch Condition size for suggested_donation_amount_input is too high. [23.96/20] (http://c2.com/cgi/wiki?AbcMetric)
  def suggested_donation_amount_input(form_builder)
  ^^^
decorators/event_attendee_decorator.rb:10:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for suggested_donation_amount_input is too high. [7/6]
  def suggested_donation_amount_input(form_builder)
  ^^^
decorators/event_attendee_decorator.rb:10:3: C: Metrics/MethodLength: Method has too many lines. [18/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def suggested_donation_amount_input(form_builder) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_attendee_decorator.rb:12:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if !plus_one? && amount != event.suggested_donation_plus_one ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_attendee_decorator.rb:24:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        h.render layout: 'confirms/donation_amount_input_old_prefixed', partial: 'confirms/donation_amount_input', locals: args
                                                                                                                        ^^^^^^^
decorators/event_attendee_decorator.rb:26:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        h.render layout: 'confirms/donation_amount_input_old_suffixed', partial: 'confirms/donation_amount_input', locals: args
                                                                                                                        ^^^^^^^
decorators/event_attendee_decorator.rb:32:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if !plus_one? && amount != event.suggested_donation_plus_one ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_attendee_decorator.rb:45:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    h.number_to_currency(user_average_donation_amount, precision: 2, unit: event.currency_symbol, locale: event.city.country.language)
                                                                                                                        ^^^^^^^^^^^^^^
decorators/event_decorator.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [296/100]
class EventDecorator < Draper::Decorator ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_decorator.rb:8:7: C: Style/PredicateName: Rename is_test_type? to test_type?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_test_type?(type)
      ^^^^^^^^^^^^^
decorators/event_decorator.rb:43:121: C: Metrics/LineLength: Line is too long. [159/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    breadcrumbs << { text: "Manage #{display_name}", link: h.event_manage_path(object), button: { text: 'View event', link: h.city_event_path(city, object) } }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/event_decorator.rb:54:3: C: Rails/Delegate: Use delegate to define delegations.
  def latitude
  ^^^
decorators/event_decorator.rb:58:3: C: Rails/Delegate: Use delegate to define delegations.
  def longitude
  ^^^
decorators/event_decorator.rb:138:3: C: Metrics/AbcSize: Assignment Branch Condition size for minimum_donation is too high. [28.16/20] (http://c2.com/cgi/wiki?AbcMetric)
  def minimum_donation
  ^^^
decorators/event_decorator.rb:195:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def buy_cta ...
  ^^^^^^^^^^^
decorators/event_decorator.rb:205:33: C: Style/MultilineHashBraceLayout: Closing hash brace must be on the line after the last hash element when opening brace is on a separate line from the first hash element.
                          data: { ...
                                ^
decorators/event_decorator.rb:211:7: W: Lint/EndAlignment: end at 211, 6 is not aligned with if at 200, 22.
      end
      ^^^
decorators/event_decorator.rb:226:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def apply_cta ...
  ^^^^^^^^^^^^^
decorators/event_decorator.rb:235:15: C: Style/MultilineHashBraceLayout: Closing hash brace must be on the line after the last hash element when opening brace is on a separate line from the first hash element.
        data: { ...
              ^
decorators/event_decorator.rb:252:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def fixed_price_cta ...
  ^^^^^^^^^^^^^^^^^^^
decorators/event_decorator.rb:261:15: C: Style/MultilineHashBraceLayout: Closing hash brace must be on the line after the last hash element when opening brace is on a separate line from the first hash element.
        data: { ...
              ^
decorators/event_decorator.rb:307:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def attendee_state ...
  ^^^^^^^^^^^^^^^^^^
decorators/event_decorator.rb:331:7: C: Style/PredicateName: Rename has_applied? to applied?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def has_applied?
      ^^^^^^^^^^^^
decorators/events_decorator.rb:1:1: C: Metrics/ClassLength: Class has too many lines. [123/100]
class EventsDecorator < Draper::CollectionDecorator ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:16:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      h.content_tag(:div, thumb_link(event.searchable, &block), class: class_for_grid_view, id: "off_platform_event_#{event.id}")
                                                                                                                        ^^^^^^^^^
decorators/events_decorator.rb:22:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      h.content_tag(:div, reserve_thumb_link(event.searchable, promo_code, &block), class: class_for_grid_view, id: "event_#{event.id}")
                                                                                                                        ^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:24:121: C: Metrics/LineLength: Line is too long. [137/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      h.content_tag(:div, reserve_thumb_link(event.searchable, &block), class: class_for_grid_view, id: "off_platform_event_#{event.id}")
                                                                                                                        ^^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:52:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for copy_for is too high. [9/6]
  def copy_for(event)
  ^^^
decorators/events_decorator.rb:52:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def copy_for(event) ...
  ^^^^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:70:5: C: Style/NegatedIf: Favor if over unless for negative conditions. (https://github.com/bbatsov/ruby-style-guide#unless-for-negatives)
    h.haml_tag :span, event.searchable.try(:rough_location), class: 'event-thumb__title' unless !event.searchable.try(:rough_location)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:70:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    h.haml_tag :span, event.searchable.try(:rough_location), class: 'event-thumb__title' unless !event.searchable.try(:rough_location)
                                                                                                                        ^^^^^^^^^^^^^^
decorators/events_decorator.rb:71:121: C: Metrics/LineLength: Line is too long. [195/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    h.haml_tag :span, h.nice_date_month_only(event.start, event.searchable.city.country.flip_month?), class: event.searchable.try(:rough_location) ? 'event-thumb__subtitle' : 'event-thumb__title'
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/events_decorator.rb:98:121: C: Metrics/LineLength: Line is too long. [151/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      h.link_to(h.city_event_reserve_path(event.city, event, promo_code: { code: promo_code }), { class: "#{event_state(event)} event-thumb" }, &block)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/off_platform_event_decorator.rb:36:28: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
    breadcrumbs << { text: "Manage Off Platform Event" }
                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/user_decorator.rb:9:36: C: Style/SymbolProc: Pass &:pay_what_you_want_on? as an argument to map instead of a block.
    object.cities_user_manages.map { |c| c.pay_what_you_want_on? }.any?
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/user_decorator.rb:13:36: C: Style/SymbolProc: Pass &:reserve_tickets_on? as an argument to map instead of a block.
    object.cities_user_manages.map { |c| c.reserve_tickets_on? }.any?
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
decorators/user_decorator.rb:25:39: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    years = (116.years.ago.year..Time.now.year).to_a.reverse
                                      ^^^
decorators/user_decorator.rb:33:12: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
      Time.now.year - user.birth_year.to_i
           ^^^
helpers/application_helper.rb:1:1: C: Metrics/ModuleLength: Module has too many lines. [136/100]
module ApplicationHelper ...
^^^^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:2:121: C: Metrics/LineLength: Line is too long. [173/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  def sign_tabs_modal(post_registration_to: registration_path(resource_name), post_session_to: new_session_path(resource_name), modal_handle: default_sign_tabs_modal_handle)
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:42:5: C: Style/GuardClause: Use a guard clause instead of wrapping the code inside a conditional expression. (https://github.com/bbatsov/ruby-style-guide#no-nested-conditionals)
    if session[:just_signed_up]
    ^^
helpers/application_helper.rb:70:17: W: Lint/UnusedMethodArgument: Unused method argument - double. If it's necessary, use _ or _double as an argument name to indicate that it won't be used. You can also write as tint_seed(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def tint_seed(double = true)
                ^^^^^^
helpers/application_helper.rb:86:8: C: Style/PercentLiteralDelimiters: %w-literals should be delimited by ( and ). (https://github.com/bbatsov/ruby-style-guide#percent-literal-braces)
    if %w{http https}.include?(url.scheme)
       ^^^^^^^^^^^^^^
helpers/application_helper.rb:119:20: C: Style/RegexpLiteral: Use %r around regular expression. (https://github.com/bbatsov/ruby-style-guide#percent-r)
    if youtube_url[/youtu\.be\/([^\?]*)/]
                   ^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:120:20: C: Style/PerlBackrefs: Avoid the use of Perl-style backrefs. (https://github.com/bbatsov/ruby-style-guide#no-perl-regexp-last-matchers)
      youtube_id = $1
                   ^^
helpers/application_helper.rb:123:19: C: Style/RegexpLiteral: Use %r around regular expression. (https://github.com/bbatsov/ruby-style-guide#percent-r)
      youtube_url[/^.*((v\/)|(embed\/)|(watch\?))\??v?=?([^\&\?]*).*/]
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:124:20: C: Style/PerlBackrefs: Avoid the use of Perl-style backrefs. (https://github.com/bbatsov/ruby-style-guide#no-perl-regexp-last-matchers)
      youtube_id = $5
                   ^^
helpers/application_helper.rb:127:5: C: Style/BarePercentLiterals: Use % instead of %Q. (https://github.com/bbatsov/ruby-style-guide#percent-q-shorthand)
    %Q{<iframe class="embed-responsive-item" title="YouTube video player" width="640" height="390" src="//www.youtube.com/embed/#{youtube_id}?autoplay=1&rel=0&modestbranding=1" frameborder="0" allowfullscreen></iframe>}
    ^^^
helpers/application_helper.rb:127:5: C: Style/PercentLiteralDelimiters: %Q-literals should be delimited by ( and ). (https://github.com/bbatsov/ruby-style-guide#percent-literal-braces)
    %Q{<iframe class="embed-responsive-item" title="YouTube video player" width="640" height="390" src="//www.youtube.com/embed/#{youtube_id}?autoplay=1&rel=0&modestbranding=1" frameborder="0" allowfullscreen></iframe>}
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:127:121: C: Metrics/LineLength: Line is too long. [219/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    %Q{<iframe class="embed-responsive-item" title="YouTube video player" width="640" height="390" src="//www.youtube.com/embed/#{youtube_id}?autoplay=1&rel=0&modestbranding=1" frameborder="0" allowfullscreen></iframe>}
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
helpers/application_helper.rb:157:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if resource.decorated?
    ^^
helpers/application_helper.rb:161:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    user_signed_in? && (current_user.is_admin? || current_user.is_manager?(resource) || current_user.is_team_member?(resource))
                                                                                                                        ^^^^^^^
helpers/events_helper.rb:3:121: C: Metrics/LineLength: Line is too long. [128/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    if user_signed_in? && @event && @event.guestlist?(current_user) && @event.confirmed_going?(current_user) && @event.upcoming?
                                                                                                                        ^^^^^^^^
helpers/events_helper.rb:13:8: C: Style/ParenthesesAroundCondition: Don't use parentheses around the condition of an if. (https://github.com/bbatsov/ruby-style-guide#no-parens-if)
    if ((@event.start - 1.5.days) < (Time.now + offset))
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
helpers/events_helper.rb:13:43: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    if ((@event.start - 1.5.days) < (Time.now + offset))
                                          ^^^
mailers/message_mailer.rb:5:3: C: Metrics/AbcSize: Assignment Branch Condition size for initialize is too high. [23.11/20] (http://c2.com/cgi/wiki?AbcMetric)
  def initialize(users, subject, message, from_email = nil, from_name = nil)
  ^^^
mailers/message_mailer.rb:5:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for initialize is too high. [8/6]
  def initialize(users, subject, message, from_email = nil, from_name = nil)
  ^^^
mailers/message_mailer.rb:5:3: C: Metrics/MethodLength: Method has too many lines. [33/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def initialize(users, subject, message, from_email = nil, from_name = nil) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/message_mailer.rb:5:3: C: Metrics/PerceivedComplexity: Perceived complexity for initialize is too high. [10/7]
  def initialize(users, subject, message, from_email = nil, from_name = nil)
  ^^^
mailers/message_mailer.rb:25:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if from_name == 'Sofar Barcelona' ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/message_mailer.rb:41:121: C: Metrics/LineLength: Line is too long. [126/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
                  template_content: { 'main' => message, 'intro' => tmp_intro, 'thanks' => tmp_thanks, 'outro' => tmp_outro },
                                                                                                                        ^^^^^^
mailers/message_mailer.rb:50:64: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/message_mailer.rb:50:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                                                                                        ^^^^^^^^^
mailers/notification_mailer.rb:7:3: C: Metrics/MethodLength: Method has too many lines. [35/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def initialize(template, to_email, template_vars = {}, subject = nil, from_email = nil, from_name = nil, referenced_model = nil, options = {}) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/notification_mailer.rb:7:17: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
  def initialize(template, to_email, template_vars = {}, subject = nil, from_email = nil, from_name = nil, referenced_model = nil, options = {})
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/notification_mailer.rb:7:121: C: Metrics/LineLength: Line is too long. [144/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  def initialize(template, to_email, template_vars = {}, subject = nil, from_email = nil, from_name = nil, referenced_model = nil, options = {})
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^
mailers/notification_mailer.rb:7:132: W: Lint/UnusedMethodArgument: Unused method argument - options. If it's necessary, use _ or _options as an argument name to indicate that it won't be used. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def initialize(template, to_email, template_vars = {}, subject = nil, from_email = nil, from_name = nil, referenced_model = nil, options = {})
                                                                                                                                   ^^^^^^^
mailers/notification_mailer.rb:19:121: C: Metrics/LineLength: Line is too long. [189/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    template_vars = { 'COMPANY' => 'Sofar Sounds', 'DESCRIPTION' => '', 'LIST_ADDRESS_HTML' => 'Level 3, 35-47 Bethnal Green Rd, London, E1 6LA, United Kingdom' }.merge(template_vars || {})
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/notification_mailer.rb:24:63: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    Sofar::MixPanel.track(to_email, "Email Sent: #{subject}", { ...
                                                              ^
mailers/notification_mailer.rb:51:64: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/notification_mailer.rb:51:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                                                                                        ^^^^^^^^^
mailers/simple_message_mailer.rb:2:3: C: Metrics/MethodLength: Method has too many lines. [23/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def initialize(to_email, to_name, subject, message, from_email = nil, from_name = nil) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/simple_message_mailer.rb:2:17: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
  def initialize(to_email, to_name, subject, message, from_email = nil, from_name = nil)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/simple_message_mailer.rb:17:5: W: Lint/UselessAssignment: Useless assignment to variable - users. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    users = [{ email: to_email, name: to_name }]
    ^^^^^
mailers/simple_message_mailer.rb:37:64: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
mailers/simple_message_mailer.rb:37:121: C: Metrics/LineLength: Line is too long. [129/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    (response.is_a?(Hash) && response.key?('error')) ? false : ['sent', 'queued', 'scheduled'].include?(response.first['status'])
                                                                                                                        ^^^^^^^^^
models/all_event.rb:11:23: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    where(start: Time.now..days.days.since)
                      ^^^
models/artist.rb:27:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :title
  ^^^^^^^^^^^^^^^^^^^^^
models/card.rb:3:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :user_id
  ^^^^^^^^^^^^^^^^^^^^^
models/charge.rb:5:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :uid
  ^^^^^^^^^^^^^^^^^^^^^
models/charge.rb:10:3: C: Metrics/AbcSize: Assignment Branch Condition size for charges_for is too high. [21/20] (http://c2.com/cgi/wiki?AbcMetric)
  def self.charges_for(event)
  ^^^
models/charge.rb:10:24: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as charges_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
  def self.charges_for(event)
                       ^^^^^
models/charge.rb:14:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      new(amount: order.event.reserve_price_three * 100, tickets: [Ticket.new, Ticket::PlusOne.new, Ticket::PlusTwo.new])
                                                                                                                        ^
models/city.rb:1:1: C: Metrics/ClassLength: Class has too many lines. [159/100]
class City < ActiveRecord::Base ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/city.rb:39:95: C: Style/Proc: Use proc instead of Proc.new. (https://github.com/bbatsov/ruby-style-guide#proc)
  validates :reserve_price_one, :reserve_price_two, :reserve_price_three, presence: true, if: Proc.new { |city| city.reserve_tickets_on? }
                                                                                              ^^^^^^^^
models/city.rb:39:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  validates :reserve_price_one, :reserve_price_two, :reserve_price_three, presence: true, if: Proc.new { |city| city.reserve_tickets_on? }
                                                                                                                        ^^^^^^^^^^^^^^^^^^
models/city.rb:40:82: C: Style/Proc: Use proc instead of Proc.new. (https://github.com/bbatsov/ruby-style-guide#proc)
  validates :suggested_donation, :suggested_donation_single, presence: true, if: Proc.new { |city| city.pay_what_you_want_on? }
                                                                                 ^^^^^^^^
models/city.rb:40:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  validates :suggested_donation, :suggested_donation_single, presence: true, if: Proc.new { |city| city.pay_what_you_want_on? }
                                                                                                                        ^^^^^^^
models/city.rb:85:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      .joins('INNER JOIN event_attendees ON events.id = event_attendees.event_id').where(event_attendees: { paid: true })
                                                                                                                        ^
models/city.rb:101:3: C: Metrics/AbcSize: Assignment Branch Condition size for avg_apply_rate_previous_3_months is too high. [32.56/20] (http://c2.com/cgi/wiki?AbcMetric)
  def avg_apply_rate_previous_3_months(month)
  ^^^
models/city.rb:101:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def avg_apply_rate_previous_3_months(month) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/city.rb:108:25: C: Rails/PluralizationGrammar: Prefer 2.months.
    month_two = month - 2.month
                        ^^^^^^^
models/city.rb:109:27: C: Rails/PluralizationGrammar: Prefer 3.months.
    month_three = month - 3.month
                          ^^^^^^^
models/city.rb:110:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    days_in_period = month_one.end_of_month.day.to_i + month_two.end_of_month.day.to_i + month_three.end_of_month.day.to_i
                                                                                                                        ^^
models/city.rb:161:3: C: Metrics/MethodLength: Method has too many lines. [13/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def set_location_if_none(force = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/city.rb:161:7: C: Style/AccessorMethodName: Do not prefix writer method names with set_.
  def set_location_if_none(force = false)
      ^^^^^^^^^^^^^^^^^^^^
models/city.rb:226:19: C: Rails/FindBy: Use find_by instead of where.first.
    city = ::City.where(cached_slug: param.gsub(/[()]/, '')).first
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/city.rb:227:19: C: Rails/FindBy: Use find_by instead of where.first.
    city = ::City.where('aliases LIKE ?', "%#{param}%").first unless city
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/artist_competition.rb:10:27: C: Style/MutableConstant: Freeze mutable objects assigned to constants.
    DEFAULT_SHARE_TITLE = 'Enter for your chance to win free tickets'
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/artist_competition.rb:14:121: C: Metrics/LineLength: Line is too long. [268/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_POST_DESCRIPTION = 'Great! All you have to do now is share this contest with your friends on Facebook. Use the button below, then wait for them to sign up. And remember, whoever gets the most friends to sign up wins <strong>2 free tickets</strong>.'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/artist_competition.rb:15:121: C: Metrics/LineLength: Line is too long. [142/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_WINNER_COPY = 'Wow! You did it! We trust that your good luck will continue and the Sofar show will be a night to remember.'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^
models/competition/artist_competition.rb:16:121: C: Metrics/LineLength: Line is too long. [213/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_DESCRIPTION = 'Just sign into Facebook and <strong>share this post with your friends.</strong> Whoever generates the most sign-ups to the Sofar Sounds community will win two tickets to the show'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/vote_competition.rb:12:27: C: Style/MutableConstant: Freeze mutable objects assigned to constants.
    DEFAULT_SHARE_TITLE = 'Enter for your chance to win free tickets'
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/vote_competition.rb:16:121: C: Metrics/LineLength: Line is too long. [268/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_POST_DESCRIPTION = 'Great! All you have to do now is share this contest with your friends on Facebook. Use the button below, then wait for them to sign up. And remember, whoever gets the most friends to sign up wins <strong>2 free tickets</strong>.'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition/vote_competition.rb:17:121: C: Metrics/LineLength: Line is too long. [142/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_WINNER_COPY = 'Wow! You did it! We trust that your good luck will continue and the Sofar show will be a night to remember.'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^
models/competition/vote_competition.rb:18:121: C: Metrics/LineLength: Line is too long. [213/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    DEFAULT_DESCRIPTION = 'Just sign into Facebook and <strong>share this post with your friends.</strong> Whoever generates the most sign-ups to the Sofar Sounds community will win two tickets to the show'.freeze
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/competition.rb:13:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :uid, :closing_date, :city, :number_of_winners,
  ^^^^^^^^^^^^^^^^^^^^^
models/competition.rb:19:55: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :closed, -> { where('closing_date <= ?', Time.now) }
                                                      ^^^
models/competition.rb:43:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if title.blank? && logo.blank?
    ^^
models/competition_entry.rb:12:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :email
  ^^^^^^^^^^^^^^^^^^^^^
models/competition_entry.rb:20:5: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
    if email.blank? && user_id
    ^^
models/competition_share_link.rb:10:19: C: Style/Lambda: Use the lambda method for multiline lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :signups, -> {
                  ^^
models/competition_share_link.rb:11:38: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
    joins(:user, :competition).where("users.created_at >= competitions.created_at")
                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/continent.rb:14:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :title
  ^^^^^^^^^^^^^^^^^^^^^
models/country.rb:17:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :title
  ^^^^^^^^^^^^^^^^^^^^^
models/country.rb:29:3: W: Lint/HandleExceptions: Do not suppress exceptions. (https://github.com/bbatsov/ruby-style-guide#dont-hide-exceptions)
  rescue
  ^^^^^^
models/event.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [598/100]
class Event < ActiveRecord::Base ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:33:121: C: Metrics/LineLength: Line is too long. [156/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  has_many :applied_females,     -> { joins(:applied_users).where(user: { gender: User::GENDER_CHOICES[1] }) },     through: :event_attendees, source: :user
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:34:121: C: Metrics/LineLength: Line is too long. [156/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  has_many :applied_non_females, -> { joins(:applied_users).where.not(user: { gender: User::GENDER_CHOICES[1] }) }, through: :event_attendees, source: :user
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:35:121: C: Metrics/LineLength: Line is too long. [125/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  has_many :accepted_users,      -> { where('event_attendees.accepted = ?', true) }, through: :event_attendees, source: :user
                                                                                                                        ^^^^^
models/event.rb:37:121: C: Metrics/LineLength: Line is too long. [145/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  delegate :address, :rough_location, :address_directions, :map_url, :street_view_url, :closest_station, :venue_type, to: :venue, allow_nil: true
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:45:73: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :minus_month,            -> () { where(start: 4.weeks.ago..Time.now) }
                                                                        ^^^
models/event.rb:46:60: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :in_48h_without_address, -> () { where(start: Time.now..48.hours.from_now).where(address: ['', nil]) }
                                                           ^^^
models/event.rb:47:60: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :within_5_days,          -> () { where(start: Time.now..5.days.from_now) }
                                                           ^^^
models/event.rb:80:11: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    (Time.now < (start - 1.day))
          ^^^
models/event.rb:84:11: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    (Time.now > (start - 1.day))
          ^^^
models/event.rb:95:3: C: Metrics/AbcSize: Assignment Branch Condition size for ready_to_reveal? is too high. [20.12/20] (http://c2.com/cgi/wiki?AbcMetric)
  def ready_to_reveal?
  ^^^
models/event.rb:98:17: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    return Time.now >= reveal_from if city.latitude.nil?
                ^^^
models/event.rb:102:24: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    timezone.time(Time.now) >= reveal_from
                       ^^^
models/event.rb:105:3: C: Metrics/AbcSize: Assignment Branch Condition size for ready_to_send_post_event_to_guests? is too high. [39.57/20] (http://c2.com/cgi/wiki?AbcMetric)
  def ready_to_send_post_event_to_guests?
  ^^^
models/event.rb:105:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for ready_to_send_post_event_to_guests? is too high. [7/6]
  def ready_to_send_post_event_to_guests?
  ^^^
models/event.rb:105:3: C: Metrics/PerceivedComplexity: Perceived complexity for ready_to_send_post_event_to_guests? is too high. [8/7]
  def ready_to_send_post_event_to_guests?
  ^^^
models/event.rb:109:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      reveal_from = self.end + (city.post_event_delay_guests || Settings.site.event.hours_after_event_to_send_post_email).hours
                                                                                                                        ^^^^^^^
models/event.rb:111:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      reveal_from = (start + 3.hours) + (city.post_event_delay_guests || Settings.site.event.hours_after_event_to_send_post_email).hours
                                                                                                                        ^^^^^^^^^^^^^^^^
models/event.rb:114:17: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    return Time.now >= reveal_from if city.latitude.nil?
                ^^^
models/event.rb:118:24: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    timezone.time(Time.now) >= reveal_from && performances.count > 0
                       ^^^
models/event.rb:121:3: C: Metrics/AbcSize: Assignment Branch Condition size for ready_to_welcome_plus_ones? is too high. [20.12/20] (http://c2.com/cgi/wiki?AbcMetric)
  def ready_to_welcome_plus_ones?
  ^^^
models/event.rb:124:17: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    return Time.now >= reveal_from if city.latitude.nil?
                ^^^
models/event.rb:128:24: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    timezone.time(Time.now) >= reveal_from
                       ^^^
models/event.rb:134:7: C: Style/PredicateName: Rename is_pay_what_you_want? to pay_what_you_want?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_pay_what_you_want?
      ^^^^^^^^^^^^^^^^^^^^^
models/event.rb:162:5: C: Rails/ReadWriteAttribute: Prefer self[:attr] over read_attribute(:attr).
    read_attribute(:reserve_price_one) || city.reserve_price_one
    ^^^^^^^^^^^^^^
models/event.rb:166:5: C: Rails/ReadWriteAttribute: Prefer self[:attr] over read_attribute(:attr).
    read_attribute(:reserve_price_two) || city.reserve_price_two
    ^^^^^^^^^^^^^^
models/event.rb:170:5: C: Rails/ReadWriteAttribute: Prefer self[:attr] over read_attribute(:attr).
    read_attribute(:reserve_price_three) || city.reserve_price_three
    ^^^^^^^^^^^^^^
models/event.rb:244:3: C: Metrics/AbcSize: Assignment Branch Condition size for email_subject is too high. [35.24/20] (http://c2.com/cgi/wiki?AbcMetric)
  def email_subject
  ^^^
models/event.rb:249:102: C: Style/StringLiteralsInInterpolation: Prefer single-quoted strings inside interpolations.
      'Sofar ' + city.title + ', ' + start.strftime('%e') + ' de ' + I18n.t("months.#{start.strftime("%B").downcase}")
                                                                                                     ^^^^
models/event.rb:320:56: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    DateHelpers.time_diff_in_natural_language(DateTime.now, start)
                                                       ^^^
models/event.rb:343:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :draft,             lambda { where('is_published' => false) }
                            ^^^^^^
models/event.rb:344:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :published,         lambda { where('is_published' => true) }
                            ^^^^^^
models/event.rb:345:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :upcoming,          lambda { where { start_utc >= (Time.now.utc) } }
                            ^^^^^^
models/event.rb:345:59: C: Style/RedundantParentheses: Don't use parentheses around a method call.
  scope :upcoming,          lambda { where { start_utc >= (Time.now.utc) } }
                                                          ^^^^^^^^^^^^^^
models/event.rb:346:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :past,              lambda { where { (start < DateTime.now) } }
                            ^^^^^^
models/event.rb:346:64: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :past,              lambda { where { (start < DateTime.now) } }
                                                               ^^^
models/event.rb:347:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :appliable,         lambda { where('is_appliable' => true) }
                            ^^^^^^
models/event.rb:348:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :closed,            lambda { where('is_appliable' => false) }
                            ^^^^^^
models/event.rb:349:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  default_scope             lambda { published }
                            ^^^^^^
models/event.rb:352:23: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    where(start: Time.now..days.days.since)
                      ^^^
models/event.rb:356:57: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    is_published and is_appliable and (start > DateTime.now)
                                                        ^^^
models/event.rb:392:33: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    (start && (start > DateTime.now)) ? true : false
                                ^^^
models/event.rb:399:35: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    time_now = timezone.time(Time.now)
                                  ^^^
models/event.rb:423:121: C: Metrics/LineLength: Line is too long. [125/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    event_attendees.detect { |ea| ea.user_id == user.id } || event_attendees.includes(:transitions).find_by(user_id: user.id)
                                                                                                                        ^^^^^
models/event.rb:432:5: W: Lint/EndAlignment: end at 432, 4 is not aligned with if at 428, 16.
    end
    ^^^
models/event.rb:436:121: C: Metrics/LineLength: Line is too long. [249/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      guests << EventAttendee.new(parent_attendee: attendee, user: User.new(first_name: attendee.plus_one_first_name, last_name: attendee.plus_one_last_name, email: attendee.plus_one_email), event: attendee.event) if attendee.plus_one_email.present?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:446:5: W: Lint/EndAlignment: end at 446, 4 is not aligned with if at 442, 16.
    end
    ^^^
models/event.rb:450:121: C: Metrics/LineLength: Line is too long. [249/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      guests << EventAttendee.new(parent_attendee: attendee, user: User.new(first_name: attendee.plus_two_first_name, last_name: attendee.plus_two_last_name, email: attendee.plus_two_email), event: attendee.event) if attendee.plus_two_email.present?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:501:3: C: Metrics/MethodLength: Method has too many lines. [14/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def add_external_to_guestlist(first_name, last_name, email, note) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:518:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_invite_emails(force = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:523:5: W: Lint/EndAlignment: end at 523, 4 is not aligned with if at 519, 19.
    end
    ^^^
models/event.rb:525:65: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    MixpanelTrackWorker.perform_async(id, 'Inviting Attendees', { ...
                                                                ^
models/event.rb:534:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_unlucky_emails(force = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:539:5: W: Lint/EndAlignment: end at 539, 4 is not aligned with if at 535, 19.
    end
    ^^^
models/event.rb:541:64: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    MixpanelTrackWorker.perform_async(id, 'Unlucky attendees', { ...
                                                               ^
models/event.rb:551:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_reminder_emails(force = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:556:5: W: Lint/EndAlignment: end at 556, 4 is not aligned with if at 552, 31.
    end
    ^^^
models/event.rb:558:63: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    MixpanelTrackWorker.perform_async(id, 'Remind attendees', { ...
                                                              ^
models/event.rb:568:3: C: Metrics/AbcSize: Assignment Branch Condition size for send_address_emails is too high. [43.34/20] (http://c2.com/cgi/wiki?AbcMetric)
  def send_address_emails(force = false)
  ^^^
models/event.rb:568:3: C: Metrics/MethodLength: Method has too many lines. [34/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_address_emails(force = false) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:568:3: C: Metrics/PerceivedComplexity: Perceived complexity for send_address_emails is too high. [8/7]
  def send_address_emails(force = false)
  ^^^
models/event.rb:573:5: W: Lint/EndAlignment: end at 573, 4 is not aligned with if at 569, 21.
    end
    ^^^
models/event.rb:579:5: W: Lint/EndAlignment: end at 579, 4 is not aligned with if at 575, 11.
    end
    ^^^
models/event.rb:581:61: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    MixpanelTrackWorker.perform_async(id, 'Reveal address', { ...
                                                            ^
models/event.rb:612:3: C: Metrics/AbcSize: Assignment Branch Condition size for send_post_event_emails is too high. [42.4/20] (http://c2.com/cgi/wiki?AbcMetric)
  def send_post_event_emails(force)
  ^^^
models/event.rb:612:3: C: Metrics/MethodLength: Method has too many lines. [26/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def send_post_event_emails(force) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:612:3: C: Metrics/PerceivedComplexity: Perceived complexity for send_post_event_emails is too high. [8/7]
  def send_post_event_emails(force)
  ^^^
models/event.rb:617:5: W: Lint/EndAlignment: end at 617, 4 is not aligned with if at 613, 13.
    end
    ^^^
models/event.rb:623:5: W: Lint/EndAlignment: end at 623, 4 is not aligned with if at 619, 17.
    end
    ^^^
models/event.rb:627:121: C: Metrics/LineLength: Line is too long. [276/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      plus_one_guests << EventAttendee.new(parent_attendee: attendee.user.display_name, user: User.new(first_name: attendee.plus_one_first_name, last_name: attendee.plus_one_last_name, email: attendee.plus_one_email), event: attendee.event) if attendee.plus_one_email.present?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:628:121: C: Metrics/LineLength: Line is too long. [276/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      plus_one_guests << EventAttendee.new(parent_attendee: attendee.user.display_name, user: User.new(first_name: attendee.plus_two_first_name, last_name: attendee.plus_two_last_name, email: attendee.plus_two_email), event: attendee.event) if attendee.plus_two_email.present?
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:666:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def to_h ...
  ^^^^^^^^
models/event.rb:728:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if Settings.site.currency.primary == city.country.currency ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:748:121: C: Metrics/LineLength: Line is too long. [174/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    city.events.published.upcoming.where('(start < ? AND id != ?) OR (start = ? AND created_at < ?)', start, id, start, created_at).order('start DESC, created_at DESC').first
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:752:121: C: Metrics/LineLength: Line is too long. [172/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    city.events.published.upcoming.where('(start > ? AND id != ?) OR (start = ? AND created_at > ?)', start, id, start, created_at).order('start ASC, created_at ASC').first
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:759:7: C: Style/PredicateName: Rename is_commercial_venue? to commercial_venue?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_commercial_venue?
      ^^^^^^^^^^^^^^^^^^^^
models/event.rb:763:7: C: Style/PredicateName: Rename is_home_venue? to home_venue?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_home_venue?
      ^^^^^^^^^^^^^^
models/event.rb:767:3: C: Rails/Delegate: Use delegate to define delegations.
  def flickr_collection
  ^^^
models/event.rb:772:121: C: Metrics/LineLength: Line is too long. [127/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @flikcr_albums ||= city.flickr_collection_id.present? ? flickr_client.albums_for_collection(city.flickr_collection_id) : []
                                                                                                                        ^^^^^^^
models/event.rb:780:34: C: Rails/FindBy: Use find_by instead of where.first.
    Competition::VoteCompetition.where(event_id: id).first
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^
models/event.rb:785:3: C: Metrics/AbcSize: Assignment Branch Condition size for set_allocation_lists is too high. [20.25/20] (http://c2.com/cgi/wiki?AbcMetric)
  def set_allocation_lists
  ^^^
models/event_attendee.rb:4:1: C: Metrics/ClassLength: Class has too many lines. [292/100]
class EventAttendee < ActiveRecord::Base ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:29:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :accepted,      lambda { where(accepted: true) }
                        ^^^^^^
models/event_attendee.rb:30:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :not_accepted,  lambda { where(accepted: false) }
                        ^^^^^^
models/event_attendee.rb:32:34: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :with_additional_guests, lambda { where(arel_table[:plus_one].eq(true).or(arel_table[:plus_two].eq(true))) }
                                 ^^^^^^
models/event_attendee.rb:34:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :not_reserved,  lambda { where { used_reserve_ticket != true } }
                        ^^^^^^
models/event_attendee.rb:35:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :reserved,      lambda { where { used_reserve_ticket == true } }
                        ^^^^^^
models/event_attendee.rb:37:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :non_credit,    lambda { where { used_ticket_credit != true } }
                        ^^^^^^
models/event_attendee.rb:38:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :used_credit,   lambda { where { used_ticket_credit == true } }
                        ^^^^^^
models/event_attendee.rb:40:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :paid,          lambda { where { paid == true } }
                        ^^^^^^
models/event_attendee.rb:41:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :unpaid,        lambda { where { paid != true } }
                        ^^^^^^
models/event_attendee.rb:43:26: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :paid_an_amount, lambda { where { (donation_amount != nil) & (donation_amount > 0) } }
                         ^^^^^^
models/event_attendee.rb:43:60: C: Style/NonNilCheck: Prefer !expression.nil? over expression != nil. (https://github.com/bbatsov/ruby-style-guide#no-non-nil-checks)
  scope :paid_an_amount, lambda { where { (donation_amount != nil) & (donation_amount > 0) } }
                                                           ^^
models/event_attendee.rb:45:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :going,         lambda { where { can_go == true } }
                        ^^^^^^
models/event_attendee.rb:46:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :cant_go,       lambda { where { cant_go == true } }
                        ^^^^^^
models/event_attendee.rb:47:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :no_show,       lambda { where { no_show == true } }
                        ^^^^^^
models/event_attendee.rb:48:25: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :unconfirmed,   lambda { accepted.where { (cant_go == false) & (can_go == false) } }
                        ^^^^^^
models/event_attendee.rb:49:28: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :exclude_no_shows, lambda { where.not(no_show: true) }
                           ^^^^^^
models/event_attendee.rb:51:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :plus_minus_month,  lambda { where(created_at: 4.weeks.ago..4.weeks.from_now) }
                            ^^^^^^
models/event_attendee.rb:52:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :last_month,        lambda { where(created_at: 1.months.ago..Time.now) }
                            ^^^^^^
models/event_attendee.rb:52:56: C: Rails/PluralizationGrammar: Prefer 1.month.
  scope :last_month,        lambda { where(created_at: 1.months.ago..Time.now) }
                                                       ^^^^^^^^
models/event_attendee.rb:52:75: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :last_month,        lambda { where(created_at: 1.months.ago..Time.now) }
                                                                          ^^^
models/event_attendee.rb:53:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :last_3_months,     lambda { where(created_at: 3.months.ago..Time.now) }
                            ^^^^^^
models/event_attendee.rb:53:75: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :last_3_months,     lambda { where(created_at: 3.months.ago..Time.now) }
                                                                          ^^^
models/event_attendee.rb:54:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :last_6_months,     lambda { where(created_at: 6.months.ago..Time.now) }
                            ^^^^^^
models/event_attendee.rb:54:75: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :last_6_months,     lambda { where(created_at: 6.months.ago..Time.now) }
                                                                          ^^^
models/event_attendee.rb:56:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :females,           lambda { joins(:user).where(users: { gender: User::GENDER_CHOICES[1] }) }
                            ^^^^^^
models/event_attendee.rb:57:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :non_females,       lambda { joins(:user).where.not(users: { gender: User::GENDER_CHOICES[1] }) }
                            ^^^^^^
models/event_attendee.rb:59:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :with_plus_ones,    lambda { where(plus_one: true) }
                            ^^^^^^
models/event_attendee.rb:60:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :with_plus_twos,    lambda { where(plus_two: true) }
                            ^^^^^^
models/event_attendee.rb:61:42: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :plus_one_emailed_24h_before,    lambda { where(sent_emailed_24before_plus_one: true) }
                                         ^^^^^^
models/event_attendee.rb:62:42: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :plus_two_emailed_24h_before,    lambda { where(sent_emailed_24before_plus_two: true) }
                                         ^^^^^^
models/event_attendee.rb:64:30: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :emailed_24h_before, lambda { where(sent_emailed_24before: true) }
                             ^^^^^^
models/event_attendee.rb:66:3: C: Rails/Validation: Prefer the new style validations validates :column, uniqueness: value over validates_uniqueness_of.
  validates_uniqueness_of :user_id, scope: :event_id, message: 'has already applied to this event', on: :create
  ^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:74:121: C: Metrics/LineLength: Line is too long. [133/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    @state_machine ||= EventAttendeeStateMachine.new(self, transition_class: EventAttendeeTransition, association_name: :transitions)
                                                                                                                        ^^^^^^^^^^^^^
models/event_attendee.rb:95:7: C: Style/PredicateName: Rename is_guestlisted? to guestlisted?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_guestlisted?
      ^^^^^^^^^^^^^^^
models/event_attendee.rb:99:7: C: Style/PredicateName: Rename is_confirmed? to confirmed?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_confirmed?
      ^^^^^^^^^^^^^
models/event_attendee.rb:107:23: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    update_attributes({ ...
                      ^
models/event_attendee.rb:109:30: C: Style/AlignHash: Align the elements of a hash literal if they span more than one line.
                             paid:             true
                             ^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:116:43: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
      transition_to!(:guestlisted) unless ['guestlisted', 'confirmed'].include? current_state
                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:215:3: C: Metrics/AbcSize: Assignment Branch Condition size for to_h is too high. [37/20] (http://c2.com/cgi/wiki?AbcMetric)
  def to_h
  ^^^
models/event_attendee.rb:215:3: C: Metrics/MethodLength: Method has too many lines. [22/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def to_h ...
  ^^^^^^^^
models/event_attendee.rb:267:3: C: Metrics/AbcSize: Assignment Branch Condition size for update_normalized_amount is too high. [20.32/20] (http://c2.com/cgi/wiki?AbcMetric)
  def update_normalized_amount
  ^^^
models/event_attendee.rb:267:3: C: Metrics/MethodLength: Method has too many lines. [15/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def update_normalized_amount ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:274:7: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
      if Settings.site.currency.primary == event_currency ...
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:296:3: W: Lint/UselessAccessModifier: Useless protected access modifier.
  protected
  ^^^^^^^^^
models/event_attendee.rb:309:3: W: Lint/IneffectiveAccessModifier: private (on line 307) does not make singleton methods private. Use private_class_method or private inside a class << self block instead.
  def self.transition_name
  ^^^
models/event_attendee.rb:313:3: W: Lint/IneffectiveAccessModifier: private (on line 307) does not make singleton methods private. Use private_class_method or private inside a class << self block instead.
  def self.transition_class
  ^^^
models/event_attendee.rb:317:3: W: Lint/IneffectiveAccessModifier: private (on line 307) does not make singleton methods private. Use private_class_method or private inside a class << self block instead.
  def self.initial_state
  ^^^
models/event_attendee.rb:322:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if event.city.country_id == 28 ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:330:57: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    Sofar::MixPanel.track(user.id, 'Email guestlisted', { ...
                                                        ^
models/event_attendee.rb:340:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def unlucky_email_sent ...
  ^^^^^^^^^^^^^^^^^^^^^^
models/event_attendee.rb:343:7: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
      { ...
      ^
models/identity.rb:3:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :uid,   :provider
  ^^^^^^^^^^^^^^^^^^^^^
models/identity.rb:4:3: C: Rails/Validation: Prefer the new style validations validates :column, uniqueness: value over validates_uniqueness_of.
  validates_uniqueness_of :uid, scope: :provider
  ^^^^^^^^^^^^^^^^^^^^^^^
models/invite_code.rb:22:15: C: Style/PercentLiteralDelimiters: %w-literals should be delimited by ( and ). (https://github.com/bbatsov/ruby-style-guide#percent-literal-braces)
    charset = %w{ 2 3 4 6 7 9 A C D E F G H J K M N P Q R T V W X Y Z}
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/notifications/emails/confirm_attendance.rb:9:9: C: Style/ParallelAssignment: Do not use parallel assignment. (https://github.com/bbatsov/ruby-style-guide#parallel-assignment)
        self.event, self.attendee = event, attendee
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/notifications/emails/invite_users.rb:7:9: C: Style/ParallelAssignment: Do not use parallel assignment. (https://github.com/bbatsov/ruby-style-guide#parallel-assignment)
        self.event, self.attendee = event, attendee
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/notifications/emails/invite_users.rb:30:7: C: Rails/Delegate: Use delegate to define delegations.
      def is_ticketed?
      ^^^
models/notifications/emails/invite_users.rb:30:11: C: Style/PredicateName: Rename is_ticketed? to ticketed?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
      def is_ticketed?
          ^^^^^^^^^^^^
models/notifications/emails/reveal_address.rb:5:7: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
      validates_presence_of :address
      ^^^^^^^^^^^^^^^^^^^^^
models/notifications/emails/reveal_address.rb:7:29: W: Lint/UnusedMethodArgument: Unused method argument - attendee. If it's necessary, use _ or _attendee as an argument name to indicate that it won't be used. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      def initialize(event, attendee = nil)
                            ^^^^^^^^
models/notifications/emails/reveal_address.rb:19:7: C: Rails/Delegate: Use delegate to define delegations.
      def address
      ^^^
models/notifications/emails/send_artist_performance_request.rb:10:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        # message = "<p>This is an automated message. Ahost has applied for your city.  You can find their information below:<br>"
                                                                                                                        ^^^^^^^^^^
models/notifications/emails/send_host_request.rb:10:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        # message = "<p>This is an automated message. Ahost has applied for your city.  You can find their information below:<br>"
                                                                                                                        ^^^^^^^^^^
models/notifications/mandrill/applied_with_buy.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [33.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/applied_with_buy.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [23/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/applied_without_buy.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [33.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/applied_without_buy.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [23/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/confirm_attendance.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [32.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/confirm_attendance.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [24/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/confirm_reserved_attendance.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [34.03/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/confirm_reserved_attendance.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [24/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/invite_users.rb:13:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [27.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/invite_users.rb:13:7: C: Metrics/MethodLength: Method has too many lines. [21/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/invite_users.rb:39:7: C: Metrics/AbcSize: Assignment Branch Condition size for you_are_invited_string is too high. [21.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def you_are_invited_string
      ^^^
models/notifications/mandrill/post_event_artists.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [44.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/post_event_artists.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [25/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/post_event_guests.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [38.03/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/post_event_guests.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [23/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/post_event_plus_ones.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [28.04/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/post_event_plus_ones.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/post_event_vips.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [33.03/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/post_event_vips.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [21/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/remind_attendees.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [32.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/remind_attendees.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [22/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/remind_attendees.rb:39:7: C: Metrics/AbcSize: Assignment Branch Condition size for not_yet_confirmed is too high. [25.02/20] (http://c2.com/cgi/wiki?AbcMetric)
      def not_yet_confirmed
      ^^^
models/notifications/mandrill/remind_attendees.rb:39:7: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def not_yet_confirmed ...
      ^^^^^^^^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [68.01/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/reveal_address.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [40/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address.rb:49:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'STATION_URL' => "https://www.google.com/maps?q=#{CGI.escape(event.closest_station.to_s + ' station,' + event.city.title)}",
                                                                                                                        ^^^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address_to_plus_ones.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [78.01/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/reveal_address_to_plus_ones.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [42/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address_to_plus_ones.rb:18:121: C: Metrics/LineLength: Line is too long. [157/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'FRIEND_ADDED_YOU_AS_PLUS_ONE' => t('notification.email.address.friend_added_you_as_plus_one', name: attendee.parent_attendee.user.display_name),
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address_to_plus_ones.rb:21:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'ARRIVAL_TIME' => t('notification.email.address.arrival_time_html', arrival_time: event.arrival_time_window),
                                                                                                                        ^
models/notifications/mandrill/reveal_address_to_plus_ones.rb:50:121: C: Metrics/LineLength: Line is too long. [140/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'STATION_URL'     => "https://www.google.com/maps?q=#{CGI.escape(event.closest_station.to_s + ' station,' + event.city.title)}",
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address_to_vip.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [69.01/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/reveal_address_to_vip.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [41/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/reveal_address_to_vip.rb:23:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'ARRIVAL_TIME' => t('notification.email.address.arrival_time_html', arrival_time: event.arrival_time_window),
                                                                                                                        ^
models/notifications/mandrill/reveal_address_to_vip.rb:50:121: C: Metrics/LineLength: Line is too long. [136/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
            'STATION_URL' => "https://www.google.com/maps?q=#{CGI.escape(event.closest_station.to_s + ' station,' + event.city.title)}",
                                                                                                                        ^^^^^^^^^^^^^^^^
models/notifications/mandrill/unlucky.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [40.45/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/unlucky.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [30/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/notifications/mandrill/welcome_vip.rb:12:7: C: Metrics/AbcSize: Assignment Branch Condition size for merge_vars is too high. [42.01/20] (http://c2.com/cgi/wiki?AbcMetric)
      def merge_vars
      ^^^
models/notifications/mandrill/welcome_vip.rb:12:7: C: Metrics/MethodLength: Method has too many lines. [26/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
      def merge_vars ...
      ^^^^^^^^^^^^^^
models/off_platform_event.rb:20:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :upcoming,          lambda { where { date > DateTime.now } }
                            ^^^^^^
models/off_platform_event.rb:20:62: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :upcoming,          lambda { where { date > DateTime.now } }
                                                             ^^^
models/off_platform_event.rb:21:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :past,              lambda { where { (date < DateTime.now) } }
                            ^^^^^^
models/off_platform_event.rb:21:63: C: Rails/TimeZone: Do not use DateTime.now without zone. Use one of Time.zone.now, DateTime.current, DateTime.now.in_time_zone, DateTime.now.utc, DateTime.now.getlocal, DateTime.now.iso8601, DateTime.now.jisx0301, DateTime.now.rfc3339, DateTime.now.to_i, DateTime.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :past,              lambda { where { (date < DateTime.now) } }
                                                              ^^^
models/off_platform_event.rb:23:29: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :minus_month,       lambda { where(date: 4.weeks.ago..Time.now) }
                            ^^^^^^
models/off_platform_event.rb:23:68: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
  scope :minus_month,       lambda { where(date: 4.weeks.ago..Time.now) }
                                                                   ^^^
models/order/reservation.rb:3:5: C: Metrics/AbcSize: Assignment Branch Condition size for charge_for_unpaid_tickets is too high. [20.32/20] (http://c2.com/cgi/wiki?AbcMetric)
    def charge_for_unpaid_tickets(event)
    ^^^
models/order/reservation.rb:3:5: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for charge_for_unpaid_tickets is too high. [9/6]
    def charge_for_unpaid_tickets(event)
    ^^^
models/order/reservation.rb:3:5: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def charge_for_unpaid_tickets(event) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/order/reservation.rb:3:5: C: Metrics/PerceivedComplexity: Perceived complexity for charge_for_unpaid_tickets is too high. [8/7]
    def charge_for_unpaid_tickets(event)
    ^^^
models/order/reservation.rb:10:9: W: Lint/RequireParentheses: Use parentheses in the method call to avoid confusion about precedence.
        charge.amount = promo_code && new_record? ? promo_code.price_1_ticket(event) * 100 : event.reserve_price_one * 100
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/order/reservation.rb:10:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        charge.amount = promo_code && new_record? ? promo_code.price_1_ticket(event) * 100 : event.reserve_price_one * 100
                                                                                                                        ^^
models/order/reservation.rb:12:9: W: Lint/RequireParentheses: Use parentheses in the method call to avoid confusion about precedence.
        charge.amount = promo_code && new_record? ? promo_code.price_2_tickets(event) * 100 : event.reserve_price_two * 100
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/order/reservation.rb:12:121: C: Metrics/LineLength: Line is too long. [123/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        charge.amount = promo_code && new_record? ? promo_code.price_2_tickets(event) * 100 : event.reserve_price_two * 100
                                                                                                                        ^^^
models/order/reservation.rb:14:9: W: Lint/RequireParentheses: Use parentheses in the method call to avoid confusion about precedence.
        charge.amount = promo_code && new_record? ? promo_code.price_3_tickets(event) * 100 : event.reserve_price_three * 100
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/order/reservation.rb:14:121: C: Metrics/LineLength: Line is too long. [125/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        charge.amount = promo_code && new_record? ? promo_code.price_3_tickets(event) * 100 : event.reserve_price_three * 100
                                                                                                                        ^^^^^
models/order.rb:22:20: C: Style/SymbolProc: Pass &:new_record? as an argument to select instead of a block.
    tickets.select { |ticket| ticket.new_record? }.size
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/performance.rb:24:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :event, :artist
  ^^^^^^^^^^^^^^^^^^^^^
models/promo_code/one_free_ticket.rb:3:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 1.freeze
                                     ^^^^^^^^
models/promo_code/one_free_ticket.rb:10:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        Charge.new(amount: event.reserve_price_two * 100, tickets: [Ticket.new, Ticket::PlusOne.new, Ticket::PlusTwo.new])
                                                                                                                        ^^
models/promo_code/one_free_ticket.rb:14:24: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_1_ticket(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_1_ticket(event)
                       ^^^^^
models/promo_code/one_free_ticket_single_use.rb:3:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 1.freeze
                                     ^^^^^^^^
models/promo_code/three_free_ticket.rb:4:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 2.freeze
                                     ^^^^^^^^
models/promo_code/three_free_ticket.rb:7:21: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as charges_for(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def charges_for(event)
                    ^^^^^
models/promo_code/three_free_ticket.rb:15:24: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_1_ticket(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_1_ticket(event)
                       ^^^^^
models/promo_code/three_free_ticket.rb:19:25: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_2_tickets(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_2_tickets(event)
                        ^^^^^
models/promo_code/three_free_ticket.rb:23:25: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_3_tickets(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_3_tickets(event)
                        ^^^^^
models/promo_code/three_free_ticket_single_use.rb:4:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 2.freeze
                                     ^^^^^^^^
models/promo_code/two_free_ticket.rb:3:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 2.freeze
                                     ^^^^^^^^
models/promo_code/two_free_ticket.rb:10:121: C: Metrics/LineLength: Line is too long. [122/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
        Charge.new(amount: event.reserve_price_one * 100, tickets: [Ticket.new, Ticket::PlusOne.new, Ticket::PlusTwo.new])
                                                                                                                        ^^
models/promo_code/two_free_ticket.rb:14:24: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_1_ticket(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_1_ticket(event)
                       ^^^^^
models/promo_code/two_free_ticket.rb:18:25: W: Lint/UnusedMethodArgument: Unused method argument - event. If it's necessary, use _ or _event as an argument name to indicate that it won't be used. You can also write as price_2_tickets(*) if you want the method to accept any arguments but don't care about them. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    def price_2_tickets(event)
                        ^^^^^
models/promo_code/two_free_ticket_single_use.rb:3:38: C: Style/RedundantFreeze: Freezing immutable objects is pointless.
    MAX_TICKETS_REDEEMABLE_IN_PWYW = 2.freeze
                                     ^^^^^^^^
models/promo_code.rb:12:46: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
  validates :expires_at, date: { after: Date.today.beginning_of_day }
                                             ^^^^^
models/promo_code.rb:18:69: C: Rails/Date: Do not use Date.today without zone. Use Time.zone.today instead.
  scope :not_expired, -> { where('promo_codes.expires_at > ?', Date.today.beginning_of_day) }
                                                                    ^^^^^
models/promo_code.rb:53:5: C: Performance/RedundantMatch: Use =~ in places where the MatchData returned by #match will not be used.
    /\A[A-Z]+\Z/.match(prefix) ? prefix : default_prefix
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
models/promo_code.rb:64:12: C: Style/RescueModifier: Avoid using rescue in its modifier form. (https://github.com/bbatsov/ruby-style-guide#no-rescue-modifiers)
    date = Date.parse(date_as_string, EXPIRES_AT_DATE_FORMAT) rescue nil
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/promo_code.rb:65:5: C: Rails/ReadWriteAttribute: Prefer self[:attr] = val over write_attribute(:attr, val).
    write_attribute(:expires_at, date)
    ^^^^^^^^^^^^^^^
models/promo_code.rb:74:10: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    Time.now.between?(valid_from, expires_at) && not_redeemed_by(user)
         ^^^
models/promo_code.rb:80:5: C: Rails/ReadWriteAttribute: Prefer self[:attr] = val over write_attribute(:attr, val).
    write_attribute(:code, read_attribute(:code).upcase)
    ^^^^^^^^^^^^^^^
models/promo_code.rb:80:28: C: Rails/ReadWriteAttribute: Prefer self[:attr] over read_attribute(:attr).
    write_attribute(:code, read_attribute(:code).upcase)
                           ^^^^^^^^^^^^^^
models/role.rb:2:11: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
  ROLES = ['admin', 'manager', 'team_member'].freeze
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/role.rb:4:3: C: Rails/HasAndBelongsToMany: Prefer has_many :through to has_and_belongs_to_many.
  has_and_belongs_to_many :users, join_table: :users_roles
  ^^^^^^^^^^^^^^^^^^^^^^^
models/search.rb:15:5: C: Style/RescueModifier: Avoid using rescue in its modifier form. (https://github.com/bbatsov/ruby-style-guide#no-rescue-modifiers)
    Integer(@city_id) rescue nil
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/search.rb:19:5: C: Style/RescueModifier: Avoid using rescue in its modifier form. (https://github.com/bbatsov/ruby-style-guide#no-rescue-modifiers)
    Integer(@days_in_future) rescue nil
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/search.rb:26:3: C: Metrics/AbcSize: Assignment Branch Condition size for attendees is too high. [29.39/20] (http://c2.com/cgi/wiki?AbcMetric)
  def attendees(event)
  ^^^
models/search.rb:26:3: C: Metrics/MethodLength: Method has too many lines. [16/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def attendees(event) ...
  ^^^^^^^^^^^^^^^^^^^^
models/search.rb:48:3: C: Metrics/AbcSize: Assignment Branch Condition size for users is too high. [21.86/20] (http://c2.com/cgi/wiki?AbcMetric)
  def users
  ^^^
models/search.rb:62:5: C: Style/RescueModifier: Avoid using rescue in its modifier form. (https://github.com/bbatsov/ruby-style-guide#no-rescue-modifiers)
    Integer(@event_id) rescue nil
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/search.rb:66:5: C: Style/RescueModifier: Avoid using rescue in its modifier form. (https://github.com/bbatsov/ruby-style-guide#no-rescue-modifiers)
    String(@search_query) rescue nil
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/song.rb:15:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :title
  ^^^^^^^^^^^^^^^^^^^^^
models/song.rb:20:31: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :has_textless_thumb,  lambda { eager_load(:video).where { videos.drive_uid != nil } }
                              ^^^^^^
models/song.rb:20:84: C: Style/NonNilCheck: Prefer !expression.nil? over expression != nil. (https://github.com/bbatsov/ruby-style-guide#no-non-nil-checks)
  scope :has_textless_thumb,  lambda { eager_load(:video).where { videos.drive_uid != nil } }
                                                                                   ^^
models/song.rb:21:31: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :by_most_recent,      lambda { order('songs.id DESC') }
                              ^^^^^^
models/song.rb:34:5: C: Style/EmptyElse: Redundant else-clause.
    else
    ^^^^
models/song.rb:49:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def artist_and_title ...
  ^^^^^^^^^^^^^^^^^^^^
models/song.rb:50:5: W: Lint/UselessAssignment: Useless assignment to variable - o. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    o = ''
    ^
models/song.rb:57:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if a ...
    ^^^^
models/song.rb:58:7: W: Lint/UselessAssignment: Useless assignment to variable - o. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      o = "#{a.title} - #{title}"
      ^
models/song.rb:60:7: W: Lint/UselessAssignment: Useless assignment to variable - o. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      o = title
      ^
models/user.rb:3:1: C: Metrics/ClassLength: Class has too many lines. [346/100]
class User < ActiveRecord::Base ...
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:52:7: C: Style/PredicateName: Rename has_basic_info? to basic_info?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def has_basic_info?
      ^^^^^^^^^^^^^^^
models/user.rb:61:52: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    if (welcomed? == false) && (created_at > (Time.now - 1.day))
                                                   ^^^
models/user.rb:78:7: C: Style/PredicateName: Rename has_home_city? to home_city?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def has_home_city?
      ^^^^^^^^^^^^^^
models/user.rb:106:14: C: Rails/FindEach: Use find_each instead of each.
    User.all.each { |u| u.update_clv }
             ^^^^
models/user.rb:106:19: C: Style/SymbolProc: Pass &:update_clv as an argument to each instead of a block.
    User.all.each { |u| u.update_clv }
                  ^^^^^^^^^^^^^^^^^^^^
models/user.rb:117:14: C: Rails/FindEach: Use find_each instead of each.
    User.all.each { |u| u.update_average_donation }
             ^^^^
models/user.rb:117:19: C: Style/SymbolProc: Pass &:update_average_donation as an argument to each instead of a block.
    User.all.each { |u| u.update_average_donation }
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:121:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def normalize_amount(amount) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:142:37: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :interested_in_membership,  lambda { where('is_interested_membership' => true) }
                                    ^^^^^^
models/user.rb:143:37: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :premium_members,           lambda { where('is_premium_member'        => true) }
                                    ^^^^^^
models/user.rb:144:37: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :founder_members,           lambda { where('is_founder_member'        => true) }
                                    ^^^^^^
models/user.rb:145:37: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :staff,                     lambda { where('is_admin'                 => true) }
                                    ^^^^^^
models/user.rb:147:7: C: Style/PredicateName: Rename is_member? to member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_member?
      ^^^^^^^^^^
models/user.rb:155:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def add_credit(amount, notify_via_email = true) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:165:121: C: Metrics/LineLength: Line is too long. [232/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      msg_body    = "You have received #{amount} new ticket credits.<br/>\nYour total is now: #{ticket_credits}<br/><br/>\nVisit the <a href=\"https://www.sofarsounds.com/dashboard\">dashboard</a> or city pages to use your credits."
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:169:51: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
    Sofar::MixPanel.track(id, 'Tickets credited', { user_email: email, user_name: display_name, change_amount: amount, user_new_total: ticket_credits })
                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:169:121: C: Metrics/LineLength: Line is too long. [152/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Sofar::MixPanel.track(id, 'Tickets credited', { user_email: email, user_name: display_name, change_amount: amount, user_new_total: ticket_credits })
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:184:12: C: Style/NilComparison: Prefer the use of the nil? predicate. (https://github.com/bbatsov/ruby-style-guide#predicate-methods)
    (super == nil) ? '1' : super
           ^^
models/user.rb:267:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  scope :event_inactivity_in_last_two_months, -> { where('last_event_activity IS NULL OR last_event_activity < ?', 2.months.ago) }
                                                                                                                        ^^^^^^^^^^
models/user.rb:270:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  scope :event_inactivity_in_last_six_months, -> { where('last_event_activity IS NULL OR last_event_activity < ?', 6.months.ago) }
                                                                                                                        ^^^^^^^^^^
models/user.rb:282:7: C: Style/PredicateName: Rename is_admin? to admin?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin?
      ^^^^^^^^^
models/user.rb:296:5: C: Style/UnlessElse: Do not use unless with else. Rewrite these with the positive case first. (https://github.com/bbatsov/ruby-style-guide#no-else-with-unless)
    unless is_admin? ...
    ^^^^^^^^^^^^^^^^
models/user.rb:306:7: C: Style/PredicateName: Rename is_manager? to manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_manager?(resource)
      ^^^^^^^^^^^
models/user.rb:320:5: C: Style/UnlessElse: Do not use unless with else. Rewrite these with the positive case first. (https://github.com/bbatsov/ruby-style-guide#no-else-with-unless)
    unless is_manager?(resource) ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:330:7: C: Style/PredicateName: Rename is_team_member? to team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_team_member?(resource)
      ^^^^^^^^^^^^^^^
models/user.rb:343:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?(resource = nil)
      ^^^^^^^^^^^^^^^^^^^^
models/user.rb:372:3: C: Metrics/AbcSize: Assignment Branch Condition size for to_h is too high. [22.02/20] (http://c2.com/cgi/wiki?AbcMetric)
  def to_h
  ^^^
models/user.rb:372:3: C: Metrics/MethodLength: Method has too many lines. [25/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def to_h ...
  ^^^^^^^^
models/user.rb:420:19: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
  def self.factory(first_name, last_name, email, note, pass = nil, is_admin = false)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:434:64: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
    [Faker::Color.color_name, Faker::Address.street_name.split(" ").first, rand(100)].join("-").downcase
                                                               ^^^
models/user.rb:434:92: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
    [Faker::Color.color_name, Faker::Address.street_name.split(" ").first, rand(100)].join("-").downcase
                                                                                           ^^^
models/user.rb:439:121: C: Metrics/LineLength: Line is too long. [138/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      MessageMailer.new(self, 'Welcome to the sofarsounds.com beta!', "Your password is: <b>#{pass}</b>").deliver if Rails.env.production?
                                                                                                                        ^^^^^^^^^^^^^^^^^^
models/user.rb:451:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for copy_answers_from is too high. [7/6]
  def copy_answers_from(user)
  ^^^
models/user.rb:466:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for set_closest_home_city is too high. [7/6]
  def set_closest_home_city
  ^^^
models/user.rb:466:3: C: Metrics/MethodLength: Method has too many lines. [19/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def set_closest_home_city ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^
models/user.rb:501:7: C: Style/PredicateName: Rename has_upcoming_events? to upcoming_events?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def has_upcoming_events?
      ^^^^^^^^^^^^^^^^^^^^
models/user.rb:505:3: C: Metrics/CyclomaticComplexity: Cyclomatic complexity for extra_questions_answered? is too high. [7/6]
  def extra_questions_answered?
  ^^^
models/user.rb:505:3: C: Metrics/PerceivedComplexity: Perceived complexity for extra_questions_answered? is too high. [8/7]
  def extra_questions_answered?
  ^^^
models/user.rb:506:121: C: Metrics/LineLength: Line is too long. [134/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    if first_name.blank? || last_name.blank? || relationship_with_music.blank? || gigs_per_month.blank? || gender.blank? || age.blank?
                                                                                                                        ^^^^^^^^^^^^^^
models/user.rb:536:31: C: Rails/FindBy: Use find_by instead of where.first.
      break token unless User.where(authentication_token: token).first
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/venue.rb:8:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :capacity
  ^^^^^^^^^^^^^^^^^^^^^
models/venue.rb:10:17: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
  VENUE_TYPES = ['Home', 'Commercial'].freeze
                ^^^^^^^^^^^^^^^^^^^^^^
models/video.rb:8:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :video_uid
  ^^^^^^^^^^^^^^^^^^^^^
models/video.rb:21:95: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
  scope :recent,            -> (number_of_videos = VIDEO_CAROUSEL_COUNT) { with_song.includes({ song: :artist }).order('songs.performed_at DESC').limit(number_of_videos) }
                                                                                              ^^^^^^^^^^^^^^^^^
models/video.rb:21:121: C: Metrics/LineLength: Line is too long. [171/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  scope :recent,            -> (number_of_videos = VIDEO_CAROUSEL_COUNT) { with_song.includes({ song: :artist }).order('songs.performed_at DESC').limit(number_of_videos) }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/video.rb:22:95: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
  scope :popular,           -> (number_of_videos = VIDEO_CAROUSEL_COUNT) { with_song.includes({ song: :artist }).order('youtube_view_count DESC').limit(number_of_videos) }
                                                                                              ^^^^^^^^^^^^^^^^^
models/video.rb:22:121: C: Metrics/LineLength: Line is too long. [171/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  scope :popular,           -> (number_of_videos = VIDEO_CAROUSEL_COUNT) { with_song.includes({ song: :artist }).order('youtube_view_count DESC').limit(number_of_videos) }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/video.rb:23:66: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
  scope :featured,          -> (limit = 12) { with_song.includes({ song: :artist }).where(songs: { recommended: true }).order("RANDOM()").limit(limit) }
                                                                 ^^^^^^^^^^^^^^^^^
models/video.rb:23:121: C: Metrics/LineLength: Line is too long. [152/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  scope :featured,          -> (limit = 12) { with_song.includes({ song: :artist }).where(songs: { recommended: true }).order("RANDOM()").limit(limit) }
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/video.rb:23:127: C: Style/StringLiterals: Prefer single-quoted strings when you don't need string interpolation or special symbols. (https://github.com/bbatsov/ruby-style-guide#consistent-string-literals)
  scope :featured,          -> (limit = 12) { with_song.includes({ song: :artist }).where(songs: { recommended: true }).order("RANDOM()").limit(limit) }
                                                                                                                              ^^^^^^^^^^
models/video.rb:24:33: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :with_textless_thumb,   lambda { where { drive_uid != nil } }
                                ^^^^^^
models/video.rb:24:60: C: Style/NonNilCheck: Prefer !expression.nil? over expression != nil. (https://github.com/bbatsov/ruby-style-guide#no-non-nil-checks)
  scope :with_textless_thumb,   lambda { where { drive_uid != nil } }
                                                           ^^
models/video.rb:61:29: C: Style/RegexpLiteral: Use %r around regular expression. (https://github.com/bbatsov/ruby-style-guide#percent-r)
    if youtube_video_url =~ /https\:\/\/youtu.be\/(.*)/
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:11:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :event_id
  ^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:12:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :full_name
  ^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:14:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :guests
  ^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:15:3: C: Rails/Validation: Prefer the new style validations validates :column, presence: value over validates_presence_of.
  validates_presence_of :reference
  ^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:19:30: C: Style/Lambda: Use the -> { ... } lambda literal syntax for single line lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
  scope :emailed_24h_before, lambda { where(sent_emailed_24before: true) }
                             ^^^^^^
models/vip_attendee.rb:47:5: C: Style/ConditionalAssignment: Use the return of the conditional for variable assignment and comparison.
    if event.city.country_id == 28 ...
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
models/vip_attendee.rb:55:5: W: Lint/UselessAssignment: Useless assignment to variable - event_properties. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    event_properties = {
    ^^^^^^^^^^^^^^^^
models/vip_attendee.rb:67:5: W: Lint/UselessAssignment: Useless assignment to variable - event_properties. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    event_properties = {
    ^^^^^^^^^^^^^^^^
policies/artist_policy.rb:14:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/city_policy.rb:50:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
policies/city_policy.rb:54:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/competition_policy.rb:26:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/continent_policy.rb:48:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
policies/event_policy.rb:87:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
policies/event_policy.rb:91:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/off_platform_event_policy.rb:71:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
policies/off_platform_event_policy.rb:75:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/promo_code_policy.rb:22:7: C: Style/PredicateName: Rename is_admin_or_manager_or_team_member? to admin_or_manager_or_team_member?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager_or_team_member?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
policies/revenue_policy.rb:23:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
policies/team_member_policy.rb:50:7: C: Style/PredicateName: Rename is_admin_or_manager? to admin_or_manager?. (https://github.com/bbatsov/ruby-style-guide#bool-methods-qmark)
  def is_admin_or_manager?
      ^^^^^^^^^^^^^^^^^^^^
services/facebook_client/photo_serializer.rb:14:33: C: Style/Lambda: Use the lambda method for multiline lambdas. (https://github.com/bbatsov/ruby-style-guide#lambda-multi-line)
    CLOSEST_IMAGE_FOR_SURFACE = -> (surface, images) do
                                ^^
services/facebook_client/photo_serializer.rb:15:18: C: Style/EachWithObject: Use each_with_object instead of inject.
      s = images.inject({}) do |acc, a|
                 ^^^^^^
services/facebook_client/photo_serializer.rb:23:16: C: Style/MutableConstant: Freeze mutable objects assigned to constants.
    SURFACES = { ...
               ^
services/facebook_client/photo_serializer.rb:37:5: C: Metrics/AbcSize: Assignment Branch Condition size for to_active_record is too high. [22/20] (http://c2.com/cgi/wiki?AbcMetric)
    def to_active_record
    ^^^
services/facebook_client/photo_serializer.rb:37:5: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
    def to_active_record ...
    ^^^^^^^^^^^^^^^^^^^^
services/flickr_client.rb:6:5: C: Style/RedundantBegin: Redundant begin block detected. (https://github.com/bbatsov/ruby-style-guide#begin-implicit)
    begin
    ^^^^^
services/flickr_client.rb:7:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      @collections ||= flickr.collections.getTree(user_id: sofarsounds_id)['collection'].map do |unserialized_collection|
                                                                                                                        ^
services/twilio_client.rb:13:3: C: Metrics/MethodLength: Method has too many lines. [11/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def handle_exception(exception, message, resource, number) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
services/youtube_client.rb:33:7: C: Style/AccessorMethodName: Do not prefix reader method names with get_.
  def get_access_token
      ^^^^^^^^^^^^^^^^
state_machines/event_attendee_state_machine.rb:12:121: C: Metrics/LineLength: Line is too long. [179/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  transition from: :confirmed,   to: [:confirmed, :guestlisted, :cant_go, :reserved] # normally shouldn't be able to move from confirmed to guestlisted but needed to deal with bug
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
views/admin/events/event_attendees/index.json.jbuilder:2:121: C: Metrics/LineLength: Line is too long. [341/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  json.extract! event_attendee, :id, :event_id, :user_id, :accepted, :plus_one, :sent_emailed_accepted, :sent_emailed_rejected, :sent_emailed_24before, :sent_emailed_24after, :plus_one_first_name, :plus_one_last_name, :plus_one_email, :cant_go, :can_go, :token, :paid, :sent_emailed_overflow_invite, :why_want_to_come, :sent_emailed_reminder
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
views/admin/events/event_attendees/show.json.jbuilder:1:121: C: Metrics/LineLength: Line is too long. [366/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
json.extract! @event_attendee, :id, :event_id, :user_id, :accepted, :plus_one, :sent_emailed_accepted, :sent_emailed_rejected, :sent_emailed_24before, :sent_emailed_24after, :plus_one_first_name, :plus_one_last_name, :plus_one_email, :cant_go, :can_go, :token, :paid, :sent_emailed_overflow_invite, :why_want_to_come, :sent_emailed_reminder, :created_at, :updated_at
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
views/cities/_search_item.json.jbuilder:5:12: W: Lint/ParenthesesAsGroupedExpression: (...) interpreted as grouped expression. (https://github.com/bbatsov/ruby-style-guide#parens-no-spaces)
json.tokens (city.title.split(' ') + (city.aliases? ? city.aliases.gsub(',', '').split(' ') : []) + city.country.title.split(' ') + (city.country.aliases? ? city.country.aliases.gsub(',', '').split(' ') : [])).uniq
           ^
views/cities/_search_item.json.jbuilder:5:68: C: Performance/StringReplacement: Use delete instead of gsub. (https://github.com/JuanitoFatas/fast-ruby#stringgsub-vs-stringtr-code)
json.tokens (city.title.split(' ') + (city.aliases? ? city.aliases.gsub(',', '').split(' ') : []) + city.country.title.split(' ') + (city.country.aliases? ? city.country.aliases.gsub(',', '').split(' ') : [])).uniq
                                                                   ^^^^^^^^^^^^^
views/cities/_search_item.json.jbuilder:5:121: C: Metrics/LineLength: Line is too long. [214/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
json.tokens (city.title.split(' ') + (city.aliases? ? city.aliases.gsub(',', '').split(' ') : []) + city.country.title.split(' ') + (city.country.aliases? ? city.country.aliases.gsub(',', '').split(' ') : [])).uniq
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
views/cities/_search_item.json.jbuilder:5:179: C: Performance/StringReplacement: Use delete instead of gsub. (https://github.com/JuanitoFatas/fast-ruby#stringgsub-vs-stringtr-code)
json.tokens (city.title.split(' ') + (city.aliases? ? city.aliases.gsub(',', '').split(' ') : []) + city.country.title.split(' ') + (city.country.aliases? ? city.country.aliases.gsub(',', '').split(' ') : [])).uniq
                                                                                                                                                                                  ^^^^^^^^^^^^^
views/data/days_until.json.jbuilder:2:14: C: Style/UnneededInterpolation: Prefer to_s over string interpolation.
  json.value "#{@days_until}"
             ^^^^^^^^^^^^^^^^
views/data/geo_signups.json.jbuilder:4:16: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
      if point.has_key?(:ip)
               ^^^^^^^^
views/data/geo_signups.json.jbuilder:6:19: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
      elsif point.has_key?(:latitude)
                  ^^^^^^^^
views/data/geo_signups.json.jbuilder:15:11: C: Style/IfUnlessModifier: Favor modifier if usage when having a single-line body. Another good alternative is the usage of control flow &&/||. (https://github.com/bbatsov/ruby-style-guide#if-as-a-modifier)
          if point.has_key?(:region_code)
          ^^
views/data/geo_signups.json.jbuilder:15:20: C: Style/DeprecatedHashMethods: Hash#has_key? is deprecated in favor of Hash#key?. (https://github.com/bbatsov/ruby-style-guide#hash-key)
          if point.has_key?(:region_code)
                   ^^^^^^^^
views/users/index.json.jbuilder:2:121: C: Metrics/LineLength: Line is too long. [436/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
  json.extract! user, :id, :email, :is_interested_membership, :first_name, :last_name, :city_other, :relationship_with_music, :age, :gigs_per_month, :is_interested_volunteer, :contact_via_email, :suggest_artist, :how_heard_about, :profession, :rating, :email_type, :timezone, :last_changed, :gmtoff, :dstoff, :why_want_to_come, :gender, :city_name, :general_notes, :membership_notes, :support_notes, :home_city_id, :latitude, :longitude
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
views/users/show.json.jbuilder:1:121: C: Metrics/LineLength: Line is too long. [461/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
json.extract! @user, :id, :email, :is_interested_membership, :first_name, :last_name, :city_other, :relationship_with_music, :age, :gigs_per_month, :is_interested_volunteer, :contact_via_email, :suggest_artist, :how_heard_about, :profession, :rating, :email_type, :timezone, :last_changed, :gmtoff, :dstoff, :why_want_to_come, :gender, :city_name, :general_notes, :membership_notes, :support_notes, :home_city_id, :latitude, :longitude, :created_at, :updated_at
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/artist_application_worker.rb:28:3: C: Metrics/MethodLength: Method has too many lines. [12/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def save_city(city, data) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^
workers/auto_stop_apply_worker.rb:6:20: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    return if Time.now < Time.now.beginning_of_month + Settings.site.auto_stop_apply_window
                   ^^^
workers/auto_stop_apply_worker.rb:6:31: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    return if Time.now < Time.now.beginning_of_month + Settings.site.auto_stop_apply_window
                              ^^^
workers/auto_stop_confirm_worker.rb:6:121: C: Metrics/LineLength: Line is too long. [126/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Event.joins(:city).upcoming.where(cities: { pay_what_you_want_on: true, auto_stop_confirm_on: true }).find_each do |event|
                                                                                                                        ^^^^^^
workers/city_header_image_processor_worker.rb:17:23: W: Lint/UnusedBlockArgument: Unused block argument - size. If it's necessary, use _ or _size as an argument name to indicate that it won't be used. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      WIDTHS.each do |size, width|
                      ^^^^
workers/email_events_addresses_to_attendees.rb:8:51: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    Event.joins(:venue, :city).where(start: (Time.now - 12.hours)..(max_time_from_now + 12.hours)).where.not(venues: { address: '' }, cities: { disable_auto_address_emails: true }).each do |event|
                                                  ^^^
workers/email_events_addresses_to_attendees.rb:8:121: C: Metrics/LineLength: Line is too long. [196/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Event.joins(:venue, :city).where(start: (Time.now - 12.hours)..(max_time_from_now + 12.hours)).where.not(venues: { address: '' }, cities: { disable_auto_address_emails: true }).each do |event|
                                                                                                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/event_address_vip_email_worker.rb:6:5: W: Lint/UselessAssignment: Useless assignment to variable - event. Did you mean event_id? (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    event = Event.find(event_id)
    ^^^^^
workers/event_header_image_processor_worker.rb:17:23: W: Lint/UnusedBlockArgument: Unused block argument - size. If it's necessary, use _ or _size as an argument name to indicate that it won't be used. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
      WIDTHS.each do |size, width|
                      ^^^^
workers/notification_mailer_worker.rb:5:14: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
  def perform(template, email, template_vars, subject, from_email, from_name, model = nil)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/send_address_email_monitoring_emails_worker.rb:5:3: C: Metrics/AbcSize: Assignment Branch Condition size for perform is too high. [22.23/20] (http://c2.com/cgi/wiki?AbcMetric)
  def perform
  ^^^
workers/send_address_email_monitoring_emails_worker.rb:11:121: C: Metrics/LineLength: Line is too long. [121/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
      CityTeam::SendCityTeamEventAddressEmailsLow.new(event).send_email if attendees_sent_email < (attendees * threshold)
                                                                                                                        ^
workers/send_city_reminder_worker.rb:5:14: C: Metrics/ParameterLists: Avoid parameter lists longer than 5 parameters. (https://github.com/bbatsov/ruby-style-guide#too-many-params)
  def perform(user, template, email, template_vars, subject, from_email, from_name)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/send_retention_emails_worker.rb:6:44: C: Style/WordArray: Use %w or %W for an array of words. (https://github.com/bbatsov/ruby-style-guide#percent-w)
    participant_cities = City.where(title: ['London', 'NYC']).pluck(:id)
                                           ^^^^^^^^^^^^^^^^^
workers/send_retention_emails_worker.rb:13:42: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
        user.update(sent_retention: Time.now)
                                         ^^^
workers/send_unlucky_email_worker.rb:5:3: C: Metrics/MethodLength: Method has too many lines. [17/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def perform ...
  ^^^^^^^^^^^
workers/send_unlucky_email_worker.rb:12:7: C: Style/Next: Use next to skip iteration. (https://github.com/bbatsov/ruby-style-guide#no-nested-conditionals)
      if event_cap(event) <= going_count(event)
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/send_unlucky_email_worker.rb:15:74: C: Style/BracesAroundHashParameters: Redundant curly braces around a hash parameter.
        MixpanelTrackWorker.perform_async(event.id, 'Unlucky attendees', { ...
                                                                         ^
workers/update_attendee_counter_cache_worker.rb:7:5: W: Lint/UselessAssignment: Useless assignment to variable - a. (https://github.com/bbatsov/ruby-style-guide#underscore-unused-vars)
    a = EventAttendee.find(id)
    ^
workers/warn_city_team_for_lineup_less_event.rb:6:53: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    Event.includes(:performances).where(start: Time.now..48.hours.from_now, performances: { id: nil }).each do |event|
                                                    ^^^
workers/warn_city_team_for_lineup_less_event.rb:7:10: C: Style/ZeroLengthPredicate: Use empty? instead of size == 0.
      if event.performances.size == 0
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/welcome_plus_one_email_worker.rb:5:3: C: Metrics/AbcSize: Assignment Branch Condition size for perform is too high. [20.05/20] (http://c2.com/cgi/wiki?AbcMetric)
  def perform(force = false)
  ^^^
workers/welcome_plus_one_email_worker.rb:6:44: C: Rails/TimeZone: Do not use Time.now without zone. Use one of Time.zone.now, Time.current, Time.now.in_time_zone, Time.now.utc, Time.now.getlocal, Time.now.iso8601, Time.now.jisx0301, Time.now.rfc3339, Time.now.to_i, Time.now.to_f instead. (https://github.com/bbatsov/rails-style-guide#time, http://danilenko.org/2012/7/6/rails_timezones)
    Event.where(start: 12.hours.ago..(Time.now + Settings.site.event.send_welcomes_to_plus_ones.hours + 12.hours)).each do |event|
                                           ^^^
workers/welcome_plus_one_email_worker.rb:6:121: C: Metrics/LineLength: Line is too long. [130/120] (https://github.com/bbatsov/ruby-style-guide#80-character-limits)
    Event.where(start: 12.hours.ago..(Time.now + Settings.site.event.send_welcomes_to_plus_ones.hours + 12.hours)).each do |event|
                                                                                                                        ^^^^^^^^^^
workers/welcome_plus_one_email_worker.rb:7:7: C: Style/Next: Use next to skip iteration. (https://github.com/bbatsov/ruby-style-guide#no-nested-conditionals)
      if event.ready_to_welcome_plus_ones?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/welcome_plus_one_email_worker.rb:11:103: W: Lint/ShadowingOuterLocalVariable: Shadowing outer local variable - event.
        PostActionNotification::WelcomePlusOnes.new(event, true, force).notify(additional_guests) do |event|
                                                                                                      ^^^^^
workers/welcome_plus_one_email_worker.rb:22:3: C: Metrics/AbcSize: Assignment Branch Condition size for get_additional_guests is too high. [28.44/20] (http://c2.com/cgi/wiki?AbcMetric)
  def get_additional_guests(event, force)
  ^^^
workers/welcome_plus_one_email_worker.rb:22:3: C: Metrics/MethodLength: Method has too many lines. [21/10] (https://github.com/bbatsov/ruby-style-guide#short-methods)
  def get_additional_guests(event, force) ...
  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/welcome_plus_one_email_worker.rb:27:5: W: Lint/EndAlignment: end at 27, 4 is not aligned with if at 23, 21.
    end
    ^^^
workers/welcome_plus_one_email_worker.rb:37:7: C: Style/Next: Use next to skip iteration. (https://github.com/bbatsov/ruby-style-guide#no-nested-conditionals)
      if attendee.plus_two_email.present?
      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
workers/welcome_plus_one_email_worker.rb:44:5: C: Style/RedundantReturn: Redundant return detected. (https://github.com/bbatsov/ruby-style-guide#no-explicit-return)
    return guests
    ^^^^^^

458 files inspected, 1181 offenses detected
